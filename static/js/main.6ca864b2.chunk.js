(this["webpackJsonpadventure-maker"]=this["webpackJsonpadventure-maker"]||[]).push([[0],{48:function(e,n,t){},49:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var c=t(0),i=t.n(c),r=t(17),a=t.n(r),d=(t(47),t(48),t(49),t(13)),s=t(6),o=t(14),j=t(7),l=t(61),u=t(64),h=t(40),f=t(37),b=t(63),O=t(62),x=t(39),g=t(65),v=t(58),p=t(9),m=t(12);function A(e,n,t){var c=e.slice();return c[e.indexOf(n)]=t,c}function C(e,n,t){return Object(s.a)(Object(s.a)({},e),{},Object(m.a)({},n,t))}var q={};function _(e){return e in q?q[e]+=1:q[e]=0,q[e]}var R=function e(){Object(p.a)(this,e),this.id=_("node"),this.name="Node "+this.id,this.description="Node description goes here",this.choices=[],this.image="default",this.image_raw=void 0,this.on_enter_effects=void 0,this.on_exit_effects=void 0},D=function e(){Object(p.a)(this,e),this.id=_("choice"),this.name="New Choice",this.exit_node="FAIL",this.on_selection_effects=void 0,this.requirements=void 0},w=function e(){Object(p.a)(this,e),this.id=_("effect"),this.effect_type="Add",this.quality="Quality",this.value=1},k=function e(){Object(p.a)(this,e),this.id=_("req"),this.group_type="AND",this.requirements=[]},y=function e(){Object(p.a)(this,e),this.id=_("req"),this.quality="Quality",this.operator="==",this.value=1},E=Object(d.b)({key:"adventure",default:new function e(){Object(p.a)(this,e),this.name="New adventure",this.starting_node=null,this.nodes=[],this.required_traits=[],this.loot_types=[],this.scanner_band_modifiers=[]}}),I=Object(d.c)({key:"nodes",get:function(e){return(0,e.get)(E).nodes}}),N=Object(d.d)({key:"single_node",get:function(e){return function(n){return(0,n.get)(E).nodes.find((function(n){return n.id===e}))}},set:function(e){return function(n,t){var c=n.set,i=(0,n.get)(E),r=Object(s.a)(Object(s.a)({},i),{},{nodes:A(i.nodes,i.nodes.find((function(n){return n.id===e})),t)});c(E,r)}}}),S=t(66),L=t(57),T=t(59),P=t(38),F=t(1);function G(e){var n=e.handleChange,t=e.handleDelete;return Object(F.jsxs)(L.a,{children:[Object(F.jsxs)(f.a,{as:"select",value:e.effect.effect_type,onChange:function(e){return n("effect_type",e.target.value)},children:[Object(F.jsx)("option",{children:"add"}),Object(F.jsx)("option",{children:"remove"}),Object(F.jsx)("option",{children:"set"})]}),Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Quality"})}),Object(F.jsx)(f.a,{value:e.effect.quality,onChange:function(e){return n("quality",e.target.value)}}),Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Value"})}),Object(F.jsx)(f.a,{value:e.effect.value,onChange:function(e){return n("value",e.target.value)}}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{variant:"danger",onClick:t,children:"Delete"})})]})}function U(e){var n=e.handleEffectsChanged,t=e.handleEffectAdded,c=e.handleEffectDeleted;function i(){t(new w)}return e.effects?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S.a.Header,{children:e.title}),Object(F.jsxs)(T.a,{children:[e.effects.map((function(e){return Object(F.jsx)(P.a,{children:Object(F.jsx)(G,{effect:e,handleChange:function(t,c){return n(e,t,c)},handleDelete:function(n,t){return c(e,n,t)}})},e.id)})),Object(F.jsx)(P.a,{children:Object(F.jsx)(v.a,{onClick:i,children:"Add New Effect"})})]})]}):Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:e.title})}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{onClick:i,children:"Create Effect"})})]})}var B=t(60);function Q(e){var n=e.handleRequirementsChanged,t=e.handleRequirementAdded,c=e.handleRequirementDeleted;function i(){t(new y)}return e.requirements?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S.a.Header,{children:e.title}),Object(F.jsxs)(T.a,{children:[e.requirements.map((function(e){return e.requirements?Object(F.jsx)(W,{group:e,handleReqGroupChanged:function(t,c){return n(e,t,c)},handleReqGroupDeleted:function(){return c(e)}},e.id):Object(F.jsx)(J,{requirement:e,handleReqChanged:function(t,c){return n(e,t,c)},handleReqDeleted:function(){return c(e)}},e.id)})),Object(F.jsx)(T.a.Item,{children:Object(F.jsxs)(B.a,{children:[Object(F.jsx)(v.a,{onClick:function(){t(new k)},children:"Add Req Group"}),Object(F.jsx)(v.a,{onClick:i,children:"Add Single Req"})]})})]})]}):Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:e.title})}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{onClick:i,children:"Add Requirements"})})]})}function J(e){var n=e.handleReqDeleted,t=e.handleReqChanged;return Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Quality"})}),Object(F.jsx)(f.a,{value:e.requirement.quality,onChange:function(e){return t("quality",e.target.value)}}),Object(F.jsxs)(f.a,{as:"select",value:e.requirement.operator,onChange:function(e){return t("operator",e.target.value)},children:[Object(F.jsx)("option",{children:"=="}),Object(F.jsx)("option",{children:"!="}),Object(F.jsx)("option",{children:">"}),Object(F.jsx)("option",{children:"<"}),Object(F.jsx)("option",{children:">="}),Object(F.jsx)("option",{children:"<="})]}),Object(F.jsx)(f.a,{value:e.requirement.value,onChange:function(e){return t("value",e.target.value)}}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{variant:"danger",onClick:function(){return n(e.requirement)},children:"Delete"})})]})}function W(e){var n=e.handleReqGroupDeleted,t=e.handleReqGroupChanged,c=function(n){var c=e.group.requirements.filter((function(e){return e!==n}));t("requirements",c)},i=function(n,c,i){var r=Object(s.a)(Object(s.a)({},n),{},Object(m.a)({},c,i)),a=e.group.requirements.slice();a[e.group.requirements.indexOf(n)]=r,t("requirements",a)};return Object(F.jsxs)(S.a,{children:[Object(F.jsx)(S.a.Header,{children:Object(F.jsxs)(L.a,{children:[Object(F.jsxs)(f.a,{as:"select",value:e.group.group_type,onChange:function(e){return t("group_type",e.target.value)},children:[Object(F.jsx)("option",{children:"AND"}),Object(F.jsx)("option",{children:"OR"})]}),Object(F.jsx)(L.a.Text,{children:"Group"}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{variant:"danger",onClick:function(){return n(e.group)},children:"Delete"})})]})}),Object(F.jsxs)(T.a,{children:[Object(F.jsx)(T.a.Item,{children:e.group.requirements.map((function(e){return e.requirements?Object(F.jsx)(W,{group:e,handleReqGroupDeleted:c,handleReqGroupChanged:function(n,t){return i(e,n,t)}},e.id):Object(F.jsx)(J,{requirement:e,handleReqDeleted:c,handleReqChanged:function(n,t){return i(e,n,t)}},e.id)}))}),Object(F.jsx)(T.a.Item,{children:Object(F.jsxs)(B.a,{children:[Object(F.jsx)(v.a,{onClick:function(){var n=new k,c=[].concat(Object(o.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Req Group"}),Object(F.jsx)(v.a,{onClick:function(){var n=new y,c=[].concat(Object(o.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Single Req"})]})})]})]})}function X(e){var n=e.handleChoiceDeletion,t=e.handleChoiceChange,i=Object(d.f)(I),r=Object(c.useState)(e.choice.exit_node),a=Object(j.a)(r,2),l=a[0],u=a[1];return Object(F.jsx)(S.a,{children:Object(F.jsxs)(S.a.Body,{children:[Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Choice"})}),Object(F.jsx)(f.a,{value:e.choice.name,onChange:function(e){return t("name",e.target.value)}}),Object(F.jsx)(L.a.Append,{children:Object(F.jsx)(v.a,{variant:"danger",onClick:n,children:"Delete"})})]}),Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Exit Node"})}),Object(F.jsxs)(f.a,{as:"select",value:l,onChange:function(e){u(e.target.value),t("exit_node",e.target.value)},children:[Object(F.jsx)("option",{children:"FAIL"}),Object(F.jsx)("option",{children:"WIN"}),i.map((function(e){return Object(F.jsx)("option",{children:e.name},e.id)}))]})]}),Object(F.jsx)(U,{title:"Selection Effects",effects:e.choice.on_selection_effects,handleEffectAdded:function(n){return function(n,c){var i=e.choice[n],r=void 0!==i?[].concat(Object(o.a)(i),[c]):[c];t(n,r)}("on_selection_effects",n)},handleEffectsChanged:function(n,c,i){return function(n,c,i,r){var a=Object(s.a)(Object(s.a)({},c),{},Object(m.a)({},i,r)),d=e.choice[n].slice();d[e.choice[n].indexOf(c)]=a,t(n,d)}("on_selection_effects",n,c,i)},handleEffectDeleted:function(n){return function(n,c){var i=e.choice[n].filter((function(e){return e!==c}));t(n,i.length?i:void 0)}("on_selection_effects",n)}}),Object(F.jsx)(Q,{title:"Requirements",requirements:e.choice.requirements,handleRequirementAdded:function(n){var c=e.choice.requirements,i=void 0!==c?[].concat(Object(o.a)(c),[n]):[n];t("requirements",i)},handleRequirementDeleted:function(n){var c=e.choice.requirements.filter((function(e){return e!==n}));t("requirements",c.length?c:void 0)},handleRequirementsChanged:function(n,c,i){var r=Object(s.a)(Object(s.a)({},n),{},Object(m.a)({},c,i)),a=e.choice.requirements.slice();a[e.choice.requirements.indexOf(n)]=r,t("requirements",a)}})]})})}function Z(e){var n=e.handleNodeDeletion,t=Object(d.e)(N(e.node.id)),i=Object(j.a)(t,2),r=i[0],a=i[1],b=function(n,t){var c=e.node[n],i=void 0!==c?[].concat(Object(o.a)(c),[t]):[t];a(C(r,n,i))},g=function(n,t,c,i){var d=Object(s.a)(Object(s.a)({},t),{},Object(m.a)({},c,i)),o=e.node[n].slice();o[e.node[n].indexOf(t)]=d,a(C(r,n,o))},p=function(n,t){var c=e.node[n].filter((function(e){return e!==t}));a(C(r,n,c.length?c:void 0))},A=r.raw_image?r.raw_image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC",q=Object(c.useRef)(),_=r.raw_image?"custom image data":r.image;return Object(F.jsx)(l.a,{fluid:!0,children:Object(F.jsxs)(O.a,{children:[Object(F.jsx)(x.a,{children:Object(F.jsx)(S.a,{children:Object(F.jsxs)(S.a.Body,{children:[Object(F.jsxs)(S.a.Title,{children:[r.name," ",Object(F.jsx)(v.a,{variant:"danger",onClick:n,children:"Delete"})]}),Object(F.jsx)(S.a.Img,{variant:"top",src:A}),Object(F.jsxs)(L.a,{children:[Object(F.jsx)(L.a.Prepend,{children:Object(F.jsx)(L.a.Text,{children:"Image"})}),Object(F.jsx)(u.a.Control,{value:_,readOnly:void 0!==r.raw_image,onChange:function(e){a(C(r,"image",e.target.value))}}),Object(F.jsx)(u.a.File,{type:"file",accept:"image/png",ref:q,onChange:function(e){var n=new FileReader;n.onload=function(e){var n=new Image;n.onload=function(){if(200===n.width&&100===n.height){var t=Object(s.a)(Object(s.a)({},r),{},{raw_image:e.target.result,image:null});a(t)}else alert("Adventure images need to be be 200x100 pngs.")},n.src=e.target.result},n.readAsDataURL(e.target.files[0])},style:{display:"none"}}),Object(F.jsxs)(L.a.Append,{children:[Object(F.jsx)(v.a,{onClick:function(){q.current.click()},children:"Custom"}),Object(F.jsx)(v.a,{onClick:function(e){var n=Object(s.a)(Object(s.a)({},r),{},{raw_image:void 0,image:"default"});a(n)},children:"Reset"})]})]}),Object(F.jsxs)(h.a,{children:[Object(F.jsx)(u.a.Label,{children:"Node ID"}),Object(F.jsx)(f.a,{value:r.name,onChange:function(e){var n=C(r,"name",e.target.value);a(n)}})]}),Object(F.jsxs)(h.a,{children:[Object(F.jsx)(u.a.Label,{children:"Description"}),Object(F.jsx)(f.a,{as:"textarea",rows:5,placeholder:"Describe whatever here.",value:r.description,onChange:function(e){return a(C(r,"description",e.target.value))}})]}),Object(F.jsx)(U,{title:"On Enter Effects",effects:r.on_enter_effects,handleEffectAdded:function(e){return b("on_enter_effects",e)},handleEffectsChanged:function(e,n,t){return g("on_enter_effects",e,n,t)},handleEffectDeleted:function(e){return p("on_enter_effects",e)}}),Object(F.jsx)(U,{title:"On Exit Effects",effects:r.on_exit_effects,parent_id:r.id,handleEffectAdded:function(e){return b("on_exit_effects",e)},handleEffectsChanged:function(e,n,t){return g("on_exit_effects",e,n,t)},handleEffectDeleted:function(e){return p("on_exit_effects",e)}})]})})}),Object(F.jsx)(x.a,{children:Object(F.jsx)(S.a,{children:Object(F.jsxs)(S.a.Body,{children:[Object(F.jsx)(S.a.Header,{children:"Choices"}),Object(F.jsxs)(T.a,{children:[r.choices.map((function(n){return Object(F.jsx)(T.a.Item,{children:Object(F.jsx)(X,{choice:n,handleChoiceDeletion:function(){return function(n){var t=e.node.choices.filter((function(e){return e!==n}));a(C(r,"choices",t))}(n)},handleChoiceChange:function(t,c){var i=Object(s.a)(Object(s.a)({},n),{},Object(m.a)({},t,c));!function(n,t){var c=e.node.choices.slice();c[e.node.choices.indexOf(n)]=t,a(C(r,"choices",c))}(n,i)}})},n.id)})),Object(F.jsx)(P.a,{children:Object(F.jsx)(v.a,{onClick:function(){return function(n){var t=[].concat(Object(o.a)(e.node.choices),[n]);a(C(r,"choices",t))}(new D)},children:"Add Choice"})})]})]})})})]})})}function M(){var e=Object(d.e)(E),n=Object(j.a)(e,2),t=n[0],c=n[1],i=Object(d.e)(I),r=Object(j.a)(i,1)[0];return Object(F.jsxs)(l.a,{fluid:!0,children:[Object(F.jsxs)(u.a,{children:[Object(F.jsxs)(h.a,{children:[Object(F.jsx)(u.a.Label,{children:"Adventure name"}),Object(F.jsx)(f.a,{placeholder:"New adventure",value:t.name,onChange:function(e){return c(C(t,"name",e.target.value))}})]}),Object(F.jsxs)(h.a,{children:[Object(F.jsx)(u.a.Label,{children:"Starting node"}),Object(F.jsx)(f.a,{as:"select",value:t.starting_node,onChange:function(e){return c(C(t,"starting_node",e.target.value))},children:r.map((function(e){return Object(F.jsx)("option",{children:e.name},e.id)}))})]})]}),Object(F.jsxs)(b.a.Container,{id:"nodes",children:[Object(F.jsx)(O.a,{children:Object(F.jsx)(x.a,{children:Object(F.jsxs)(g.a,{variant:"tabs",children:[r.map((function(e){return Object(F.jsx)(g.a.Item,{children:Object(F.jsx)(g.a.Link,{eventKey:e.id,children:e.name})},e.id)})),Object(F.jsx)(g.a.Item,{children:Object(F.jsx)(g.a.Link,{onClick:function(){return c(C(t,"nodes",[].concat(Object(o.a)(r),[new R])))},children:"Add Node"})})]})})}),Object(F.jsx)(O.a,{children:Object(F.jsx)(x.a,{children:Object(F.jsx)(b.a.Content,{children:r.map((function(e){return Object(F.jsx)(b.a.Pane,{eventKey:e.id,children:Object(F.jsx)(Z,{node:e,handleNodeDeletion:function(){return function(e){return c(C(t,"nodes",r.filter((function(n){return n!==e}))))}(e)}})},e.id)}))})})})]}),Object(F.jsx)(O.a,{children:Object(F.jsxs)(x.a,{children:[Object(F.jsx)(v.a,{onClick:function(){var e={adventure_name:t.name,starting_node:t.starting_node,nodes:r},n=new Blob([JSON.stringify(e,(function(e,n){if("id"!==e)return n}))],{type:"application/json"}),c=URL.createObjectURL(n);window.open(c)},children:"Export"}),Object(F.jsx)(u.a.Group,{children:Object(F.jsx)(u.a.File,{label:"Import",onChange:function(e){var n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result,(function(e,n){return n===Object(n)&&(n.id=_("import")),n})),i=Object(s.a)(Object(s.a)({},t),{},{name:n.adventure_name,starting_node:n.starting_node,nodes:n.nodes});c(i)},n.readAsText(e.target.files[0])},accept:".json",custom:!0})})]})})]})}var H=function(){return Object(F.jsx)(d.a,{children:Object(F.jsx)(M,{})})},K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,67)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(H,{})}),document.getElementById("root")),K()}},[[55,1,2]]]);
//# sourceMappingURL=main.6ca864b2.chunk.js.map