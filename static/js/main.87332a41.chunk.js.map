{"version":3,"sources":["Helpers.js","State.js","Components/EffectBuilder.js","Components/RequirementsBuilder.js","Components/AdventureChoice.js","Components/AdventureNode.js","signal_lost.png","Components/AdventureTrigger.js","Components/AdventureEditor.js","App.js","reportWebVitals.js","index.js"],"names":["replaceItemInArray","arr","oldVal","newValue","modifed","slice","indexOf","updateProp","obj","prop_name","new_value","global_ids","unique_id","category","NodeData","this","id","name","description","choices","image","image_raw","undefined","on_enter_effects","on_exit_effects","TriggerData","target_node","on_trigger_effects","ChoiceData","exit_node","on_selection_effects","requirements","EffectData","effect_type","quality","value","ReqGroupData","group_type","ReqData","operator","AdventureState","atom","key","default","starting_node","nodes","triggers","required_traits","loot_types","scanner_band_modifiers","NodesSelector","selector","get","NodeSelector","selectorFamily","find","x","set","current","modified","TriggersSelector","TriggerSelector","Effect","props","handleChange","handleDelete","value_type","effect","Object","InputGroup","FormControl","as","onChange","e","target","Prepend","Text","low","high","value_type_controls","Append","Button","onClick","allowed_types","current_index","new_type","length","defaultForValueType","variant","EffectBuilder","handleEffectsChanged","handleEffectAdded","handleEffectDeleted","add_effect","effects","Card","Header","title","ListGroup","map","ListGroupItem","prop","RequirementsBuilder","handleRequirementsChanged","handleRequirementAdded","handleRequirementDeleted","add_req","req","ReqGroup","group","handleReqGroupChanged","handleReqGroupDeleted","SingleReq","requirement","handleReqChanged","handleReqDeleted","Item","ButtonGroup","deleteSubReq","deleted","new_reqs","filter","updateSubReq","old_req","changed_req","border","new_group","new_req","AdventureChoice","handleChoiceDeletion","handleChoiceChange","useRecoilValue","useState","choice","exitNodeSelectValue","setExitNodeSelectValue","Body","node","added","effect_prop","new_effect","old_effects","new_effects","addEffect","old","old_effect","changed_prop","changed_effect","updateEffects","removed","deleteEffect","old_reqs","AdventureNode","handleNodeDeletion","useRecoilState","setNode","current_image","raw_image","imageInput","useRef","image_name_text","CardGroup","Title","Img","src","Form","Control","readOnly","File","type","accept","ref","reader","FileReader","onload","uploaded_image","Image","width","height","modified_node","result","alert","readAsDataURL","files","style","display","click","FormGroup","Label","rows","placeholder","parent_id","new_choices","removeChoice","choice_property","new_choice","old_choice","updateChoice","addChoice","AdventureTrigger","handleDeletion","trigger","setTrigger","update_trigger_name","AdventureEditor","adventure","setAdventure","activeTab","setActiveTab","useEffect","ImportInput","draggedItem","setDraggedItem","Container","fluid","Tab","activeKey","onSelect","Row","Col","Nav","draggable","onDragEnd","onDragStart","start_dragging","onDrop","index_a","index_b","modified_nodes","switch_node","onDragOver","preventDefault","validate_drop","Link","eventKey","modified_adventure","Content","Pane","changed_nodes","delete_node","class","changed_triggers","delete_trigger","data_object","adventure_name","blob","Blob","JSON","stringify","blob_url","URL","createObjectURL","window","open","parse","readAsText","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.87332a41.chunk.js","sourcesContent":["//Helpers\r\nexport function replaceItemInArray(arr, oldVal, newValue) {\r\n    const modifed = arr.slice()\r\n    modifed[arr.indexOf(oldVal)] = newValue\r\n    return modifed\r\n}\r\n\r\nexport function updateProp(obj, prop_name, new_value) {\r\n    return { ...obj, [prop_name]: new_value }\r\n}","import { atom, selector, selectorFamily} from 'recoil'\r\nimport {replaceItemInArray} from './Helpers'\r\n\r\n/// Eugh\r\nexport const global_ids = {};\r\nexport function unique_id(category) {\r\n    category in global_ids ? global_ids[category] += 1 : global_ids[category] = 0\r\n    return global_ids[category]\r\n}\r\n\r\n//Data classes\r\nexport class AdventureData {\r\n    constructor() {\r\n        this.name = \"New adventure\"\r\n        this.starting_node = \"\"\r\n        this.nodes = []\r\n        this.triggers = []\r\n        this.required_traits = []\r\n        this.loot_types = []\r\n        this.scanner_band_modifiers = []\r\n    }\r\n}\r\n\r\nexport class NodeData {\r\n    constructor() {\r\n        this.id = unique_id(\"node\")\r\n        this.name = \"Node \" + this.id\r\n        this.description = \"Node description goes here\"\r\n        this.choices = []\r\n        this.image = \"default\"\r\n        this.image_raw = undefined\r\n        this.on_enter_effects = undefined\r\n        this.on_exit_effects = undefined\r\n    }\r\n}\r\n\r\nexport class TriggerData{\r\n    constructor(){\r\n        this.id = unique_id(\"trigger\")\r\n        this.name = \"Trigger\"\r\n        this.target_node = undefined\r\n        this.on_trigger_effects = undefined\r\n    }\r\n}\r\n\r\nexport class ChoiceData {\r\n    constructor() {\r\n        this.id = unique_id(\"choice\")\r\n        this.name = \"New Choice\"\r\n        this.exit_node = \"FAIL\"\r\n        this.on_selection_effects = undefined\r\n        this.requirements = undefined\r\n    }\r\n}\r\n\r\nexport class EffectData {\r\n    constructor() {\r\n        this.id = unique_id(\"effect\")\r\n        this.effect_type = \"Add\"\r\n        this.quality = \"Quality\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport class ReqGroupData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.group_type = \"AND\"\r\n        this.requirements = []\r\n    }\r\n}\r\n\r\nexport class ReqData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.quality = \"Quality\"\r\n        this.operator = \"==\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport const AdventureState = atom({\r\n    key: \"adventure\",\r\n    default: new AdventureData(),\r\n})\r\n\r\nexport const NodesSelector = selector({\r\n    key: \"nodes\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.nodes\r\n    }\r\n})\r\n\r\nexport const NodeSelector = selectorFamily({\r\n    key: \"single_node\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.nodes.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, nodes: replaceItemInArray(current.nodes, current.nodes.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n\r\nexport const TriggersSelector = selector({\r\n    key: \"triggers\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.triggers\r\n    }\r\n})\r\n\r\nexport const TriggerSelector = selectorFamily({\r\n    key: \"single_trigger\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.triggers.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, triggers: replaceItemInArray(current.triggers, current.triggers.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n","import { Button, Card, ListGroup, FormControl, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { EffectData } from './../State'\r\n\r\nfunction Effect(props) {\r\n    const handleChange = props.handleChange\r\n    const handleDelete = props.handleDelete\r\n    const value_type = props.effect.value === Object(props.effect.value) ? props.effect.value[\"value_type\"] : \"raw\"\r\n\r\n    const defaultForValueType = value_type => {\r\n        switch(value_type){\r\n            case \"raw\":\r\n                return 0\r\n            case \"random\":\r\n               return { \"value_type\": \"random\", \"low\": 0, \"high\": 0 }\r\n            default:\r\n                return 0\r\n        }\r\n    }\r\n\r\n    const toggleSpecialValueType = e => {\r\n        const allowed_types = [\"raw\",\"random\"]\r\n        const current_index = allowed_types.indexOf(value_type)\r\n        const new_type = allowed_types[(current_index+1)%allowed_types.length]\r\n        handleChange(\"value\",defaultForValueType(new_type))\r\n    }\r\n\r\n    const value_type_controls = value_type => {\r\n        switch (value_type) {\r\n            case \"random\":\r\n                return (\r\n                    <>\r\n                        <InputGroup.Text>Random</InputGroup.Text>\r\n                        <FormControl value={props.effect.value.low} onChange={e => handleChange(\"value\", {...props.effect.value,low:e.target.value})} />\r\n                        <InputGroup.Text>To</InputGroup.Text>\r\n                        <FormControl value={props.effect.value.high} onChange={e => handleChange(\"value\",{...props.effect.value,high:e.target.value})} />\r\n                    </>\r\n                )\r\n            case \"raw\":\r\n                return (<FormControl value={props.effect.value} onChange={e => handleChange(\"value\", e.target.value)} />)\r\n            default:\r\n                return (<InputGroup.Text>Unsupported</InputGroup.Text>)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <InputGroup>\r\n            <FormControl as=\"select\" value={props.effect.effect_type} onChange={e => handleChange(\"effect_type\", e.target.value)}>\r\n                <option>add</option>\r\n                <option>remove</option>\r\n                <option>set</option>\r\n            </FormControl>\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Quality</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.quality} onChange={e => handleChange(\"quality\", e.target.value)} />\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Value</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            {value_type_controls(value_type)}\r\n\r\n            <InputGroup.Append>\r\n                <Button onClick={toggleSpecialValueType}>*</Button>\r\n                <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\r\n            </InputGroup.Append>\r\n        </InputGroup>)\r\n}\r\n\r\nexport function EffectBuilder(props) {\r\n    const handleEffectsChanged = props.handleEffectsChanged\r\n    const handleEffectAdded = props.handleEffectAdded\r\n    const handleEffectDeleted = props.handleEffectDeleted\r\n    function add_effect() {\r\n        handleEffectAdded(new EffectData())\r\n    }\r\n\r\n    if (!props.effects)\r\n        return (\r\n            <InputGroup>\r\n                <InputGroup.Prepend>\r\n                    <InputGroup.Text>\r\n                        {props.title}\r\n                    </InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                    <Button onClick={add_effect}>Create Effect</Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        )\r\n    return (\r\n        <>\r\n            <Card.Header>{props.title}</Card.Header>\r\n            <ListGroup>\r\n                {props.effects.map(effect => (\r\n                    <ListGroupItem key={effect.id}>\r\n                        <Effect\r\n                            effect={effect}\r\n                            handleChange={(prop, value) => handleEffectsChanged(effect, prop, value)}\r\n                            handleDelete={(prop, value) => handleEffectDeleted(effect, prop, value)} />\r\n                    </ListGroupItem>))}\r\n                <ListGroupItem>\r\n                    <Button onClick={add_effect}>Add New Effect</Button>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n        </>)\r\n}","import {ReqGroupData,ReqData} from '../State'\r\nimport {InputGroup,Button,Card,ListGroup,FormControl,ButtonGroup} from 'react-bootstrap'\r\n\r\nexport function RequirementsBuilder(props) {\r\n    const handleRequirementsChanged = props.handleRequirementsChanged\r\n    const handleRequirementAdded = props.handleRequirementAdded\r\n    const handleRequirementDeleted = props.handleRequirementDeleted\r\n  \r\n    function add_req_group() {\r\n      handleRequirementAdded(new ReqGroupData())\r\n    }\r\n  \r\n    function add_req() {\r\n      handleRequirementAdded(new ReqData())\r\n    }\r\n  \r\n    if (!props.requirements) {\r\n      return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>\r\n            {props.title}\r\n          </InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <InputGroup.Append>\r\n          <Button onClick={add_req}>Add Requirements</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>)\r\n    }\r\n    return (\r\n      <>\r\n      <Card.Header>{props.title}</Card.Header>\r\n      <ListGroup>\r\n        {props.requirements.map(req => {\r\n          return req.requirements ? (\r\n            <ReqGroup\r\n              key={req.id} \r\n              group={req}\r\n              handleReqGroupChanged={(prop_name,new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqGroupDeleted={() => handleRequirementDeleted(req)}\r\n              />) :\r\n            (<SingleReq \r\n              key={req.id}\r\n              requirement={req}\r\n              handleReqChanged={(prop_name, new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqDeleted={() => handleRequirementDeleted(req)}\r\n            />)\r\n        })}\r\n        <ListGroup.Item>\r\n          <ButtonGroup>\r\n            <Button onClick={add_req_group}>Add Req Group</Button>\r\n            <Button onClick={add_req}>Add Single Req</Button>\r\n          </ButtonGroup>\r\n        </ListGroup.Item>\r\n      </ListGroup></>)\r\n  }\r\n\r\n\r\n  \r\n  function SingleReq(props) {\r\n    const handleReqDeleted = props.handleReqDeleted\r\n    const handleReqChanged = props.handleReqChanged\r\n    return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>Quality</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <FormControl value={props.requirement.quality} onChange={e => handleReqChanged(\"quality\", e.target.value)} />\r\n        <FormControl as=\"select\" value={props.requirement.operator} onChange={e => handleReqChanged(\"operator\", e.target.value)}>\r\n          <option>==</option>\r\n          <option>!=</option>\r\n          <option>&gt;</option>\r\n          <option>&lt;</option>\r\n          <option>&gt;=</option>\r\n          <option>&lt;=</option>\r\n        </FormControl>\r\n        <FormControl value={props.requirement.value} onChange={e => handleReqChanged(\"value\", e.target.value)}/>\r\n        <InputGroup.Append>\r\n          <Button variant=\"danger\" onClick={() => handleReqDeleted(props.requirement)}>Delete</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    )\r\n  }\r\n  \r\n  function ReqGroup(props) {\r\n    const handleReqGroupDeleted = props.handleReqGroupDeleted\r\n    const handleReqGroupChanged = props.handleReqGroupChanged\r\n\r\n    const addSubGroup = () => {\r\n      const new_group = new ReqGroupData()\r\n      const new_reqs = [...props.group.requirements, new_group]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const addSubReq = () => {\r\n      const new_req = new ReqData()\r\n      const new_reqs = [...props.group.requirements, new_req]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const deleteSubReq = (deleted) =>{\r\n      const new_reqs = props.group.requirements.filter(x => x !== deleted)\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const updateSubReq = (old_req,prop,new_value) =>{\r\n      const changed_req = {...old_req, [prop]:new_value}\r\n      const new_reqs = props.group.requirements.slice()\r\n      new_reqs[props.group.requirements.indexOf(old_req)] = changed_req\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    return (\r\n      <Card border=\"dark\">\r\n        <Card.Header>\r\n          <InputGroup>\r\n            <FormControl as=\"select\" value={props.group.group_type} onChange={e => handleReqGroupChanged(\"group_type\",e.target.value)}> \r\n              <option>AND</option>\r\n              <option>OR</option>\r\n            </FormControl>\r\n            <InputGroup.Text>Group</InputGroup.Text>\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={() => handleReqGroupDeleted(props.group)} >Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </Card.Header>\r\n        <ListGroup>\r\n          <ListGroup.Item>\r\n            {props.group.requirements.map(req =>{\r\n              return req.requirements ? \r\n                (<ReqGroup\r\n                  key={req.id}\r\n                  group={req}\r\n                  handleReqGroupDeleted={deleteSubReq}\r\n                  handleReqGroupChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />) : \r\n                (<SingleReq\r\n                  key={req.id} \r\n                  requirement={req}\r\n                  handleReqDeleted={deleteSubReq}\r\n                  handleReqChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />)\r\n            })}\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <ButtonGroup>\r\n              <Button onClick={addSubGroup}>Add Req Group</Button>\r\n              <Button onClick={addSubReq}>Add Single Req</Button>\r\n            </ButtonGroup>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n      </Card>\r\n    )\r\n  }","import React,{useState} from 'react'\r\nimport {Button, Card, InputGroup, FormControl } from 'react-bootstrap'\r\nimport {useRecoilValue} from 'recoil'\r\nimport {NodesSelector} from './../State'\r\nimport {EffectBuilder} from './EffectBuilder'\r\nimport {RequirementsBuilder} from './RequirementsBuilder'\r\n\r\nexport function AdventureChoice(props) {\r\n    const handleChoiceDeletion = props.handleChoiceDeletion\r\n    const handleChoiceChange = props.handleChoiceChange\r\n  \r\n  \r\n    const addEffect = (effect_prop, new_effect) => {\r\n      const old_effects = props.choice[effect_prop]\r\n      const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n      const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n      const new_effects = props.choice[effect_prop].slice()\r\n      new_effects[props.choice[effect_prop].indexOf(old_effect)] = changed_effect\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const deleteEffect = (effect_prop, removed) => {\r\n      const new_effects = props.choice[effect_prop].filter(x => x !== removed)\r\n      handleChoiceChange(effect_prop, new_effects.length ? new_effects : undefined)\r\n    }\r\n  \r\n  \r\n    const addRequirement = added => {\r\n      const old_reqs = props.choice.requirements\r\n      const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const deleteRequirement = removed => {\r\n      const new_reqs = props.choice.requirements.filter(x => x !== removed)\r\n      handleChoiceChange(\"requirements\", new_reqs.length ? new_reqs : undefined)\r\n    }\r\n  \r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n      const changed_req = { ...old_req, [changed_prop]: new_value }\r\n      const new_reqs = props.choice.requirements.slice()\r\n      new_reqs[props.choice.requirements.indexOf(old_req)] = changed_req\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const nodes = useRecoilValue(NodesSelector)\r\n    const [exitNodeSelectValue, setExitNodeSelectValue] = useState(props.choice.exit_node);\r\n  \r\n    const changeExitNode = (e) => {\r\n      setExitNodeSelectValue(e.target.value)\r\n      handleChoiceChange(\"exit_node\", e.target.value)\r\n    }\r\n  \r\n  \r\n    return (\r\n      <Card>\r\n        <Card.Body>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Choice</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.choice.name} onChange={(e) => handleChoiceChange(\"name\", e.target.value)} />\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={handleChoiceDeletion}>Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Exit Node</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl as=\"select\" value={exitNodeSelectValue} onChange={changeExitNode}>\r\n              <option>FAIL</option>\r\n              <option>WIN</option>\r\n              {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n            </FormControl>\r\n          </InputGroup>\r\n          <EffectBuilder\r\n              title=\"Selection Effects\"\r\n              effects={props.choice.on_selection_effects}\r\n              handleEffectAdded={added => addEffect(\"on_selection_effects\", added)}\r\n              handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_selection_effects\", old, prop, new_value)}\r\n              handleEffectDeleted={deleted => deleteEffect(\"on_selection_effects\", deleted)}/>\r\n          <RequirementsBuilder\r\n            title=\"Requirements\"\r\n            requirements={props.choice.requirements}\r\n            handleRequirementAdded={addRequirement}\r\n            handleRequirementDeleted={deleteRequirement}\r\n            handleRequirementsChanged={updateRequirements}\r\n          />\r\n        </Card.Body>\r\n      </Card>)\r\n  }","import React, { useRef } from 'react';\r\nimport { Button, Col, Container, Row, Card,CardGroup, ListGroup, FormControl, FormGroup, Form, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport default_image from '../signal_lost.png'\r\nimport { updateProp } from '../Helpers'\r\nimport { NodeSelector, ChoiceData } from '../State'\r\nimport { AdventureChoice } from './AdventureChoice'\r\nimport { EffectBuilder } from './EffectBuilder'\r\n\r\n\r\nexport function AdventureNode(props) {\r\n    const handleNodeDeletion = props.handleNodeDeletion\r\n\r\n    const [node, setNode] = useRecoilState(NodeSelector(props.node.id))\r\n\r\n    const update_node_name = (e) => {\r\n        const modified_node = updateProp(node, \"name\", e.target.value)\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const addChoice = (new_choice) => {\r\n        const new_choices = [...props.node.choices, new_choice]\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const removeChoice = (removed) => {\r\n        const new_choices = props.node.choices.filter(x => x !== removed)\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n    const updateChoice = (old_choice, new_choice) => {\r\n        const new_choices = props.node.choices.slice()\r\n        new_choices[props.node.choices.indexOf(old_choice)] = new_choice\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.node[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.node[effect_prop].slice()\r\n        new_effects[props.node[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.node[effect_prop].filter(x => x !== removed)\r\n        setNode(updateProp(node, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const current_image = node.raw_image ? node.raw_image : default_image\r\n    const imageInput = useRef()\r\n    const try_uploading_image = () => {\r\n        imageInput.current.click() //god why\r\n    }\r\n\r\n    const setUploadedImage = (e) => {\r\n        var reader = new FileReader()\r\n        reader.onload = (e) => {\r\n            var uploaded_image = new Image()\r\n            uploaded_image.onload = () =>{\r\n                if(uploaded_image.width !== 200 || uploaded_image.height !== 100){\r\n                    alert(`Adventure images need to be be 200x100 pngs.`)\r\n                    return\r\n                }\r\n                const modified_node = {...node,\r\n                    raw_image:e.target.result,\r\n                    image:null\r\n                }\r\n                setNode(modified_node)\r\n            }\r\n            uploaded_image.src = e.target.result\r\n        }\r\n        reader.readAsDataURL(e.target.files[0])\r\n    }\r\n\r\n    const reset_image = (e) => {\r\n        const modified_node = {...node,\r\n            raw_image:undefined,\r\n            image:\"default\"\r\n        }\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const update_image = e => {\r\n        setNode(updateProp(node,\"image\",e.target.value))\r\n    }\r\n\r\n    const image_name_text = node.raw_image ? \"custom image data\" : node.image\r\n    return (\r\n        <CardGroup>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Title>{node.name} <Button variant=\"danger\" onClick={handleNodeDeletion}>Delete</Button></Card.Title>\r\n                            <Card.Img variant=\"top\" src={current_image}  />\r\n                            <InputGroup>\r\n                                <InputGroup.Prepend>\r\n                                    <InputGroup.Text>Image</InputGroup.Text>\r\n                                </InputGroup.Prepend>\r\n                                <Form.Control value={image_name_text} readOnly={node.raw_image !== undefined} onChange={update_image}/>\r\n                                <Form.File type='file' accept=\"image/png\" ref={imageInput} onChange={setUploadedImage} style={{display:\"none\"}}/>\r\n                                <InputGroup.Append>\r\n                                    <Button onClick={try_uploading_image}>Custom</Button>\r\n                                    <Button onClick={reset_image}>Reset</Button>\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Node ID</Form.Label>\r\n                                <FormControl value={node.name} onChange={update_node_name} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Description</Form.Label>\r\n                                <FormControl as=\"textarea\" rows={5} placeholder=\"Describe whatever here.\" value={node.description} onChange={(e) => setNode(updateProp(node, \"description\", e.target.value))} />\r\n                            </FormGroup>\r\n                            <EffectBuilder\r\n                                title=\"On Enter Effects\"\r\n                                effects={node.on_enter_effects}\r\n                                handleEffectAdded={added => addEffect(\"on_enter_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_enter_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_enter_effects\", deleted)} />\r\n                            <EffectBuilder\r\n                                title=\"On Exit Effects\"\r\n                                effects={node.on_exit_effects}\r\n                                parent_id={node.id}\r\n                                handleEffectAdded={added => addEffect(\"on_exit_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_exit_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_exit_effects\", deleted)} />\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Header>Choices</Card.Header>\r\n                            <ListGroup>\r\n                                {node.choices.map(choice => (\r\n                                    <ListGroup.Item key={choice.id}>\r\n                                        <AdventureChoice\r\n                                            choice={choice}\r\n                                            handleChoiceDeletion={() => removeChoice(choice)}\r\n                                            handleChoiceChange={(choice_property, new_value) => {\r\n                                                const new_choice = { ...choice, [choice_property]: new_value }\r\n                                                updateChoice(choice, new_choice)\r\n                                            }}\r\n                                        />\r\n                                    </ListGroup.Item>))}\r\n                                <ListGroupItem><Button onClick={() => addChoice(new ChoiceData())}>Add Choice</Button></ListGroupItem>\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n            </CardGroup>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC\"","import React, { useRef } from 'react';\r\nimport { Button, Col, Container, Row, Card, CardGroup, ListGroup, FormControl, FormGroup, Form, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport { updateProp } from '../Helpers'\r\nimport { TriggerSelector } from '../State'\r\nimport { RequirementsBuilder } from './RequirementsBuilder'\r\nimport { EffectBuilder } from './EffectBuilder'\r\n\r\n\r\nexport function AdventureTrigger(props) {\r\n    const handleDeletion = props.handleDeletion\r\n\r\n    const [trigger, setTrigger] = useRecoilState(TriggerSelector(props.trigger.id))\r\n\r\n    const update_trigger_name = (e) => {\r\n        setTrigger(updateProp(trigger, \"name\", e.target.value))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.trigger[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.trigger[effect_prop].slice()\r\n        new_effects[props.trigger[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.trigger[effect_prop].filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const addRequirement = added => {\r\n        const old_reqs = props.trigger.requirements\r\n        const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n        setTrigger(updateProp(trigger,\"requirements\", new_reqs))\r\n    }\r\n\r\n    const deleteRequirement = removed => {\r\n        const new_reqs = props.trigger.requirements.filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs.length ? new_reqs : undefined))\r\n    }\r\n\r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n        const changed_req = { ...old_req, [changed_prop]: new_value }\r\n        const new_reqs = props.trigger.requirements.slice()\r\n        new_reqs[props.trigger.requirements.indexOf(old_req)] = changed_req\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs))\r\n    }\r\n\r\n\r\n    return (\r\n        <ListGroupItem>\r\n            <FormGroup>\r\n                <Form.Label>Trigger ID</Form.Label>\r\n                <FormControl value={trigger.name} onChange={update_trigger_name} />\r\n                <Button variant=\"danger\" onClick={handleDeletion}>Delete</Button>\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Form.Label>Target Node On Trigger</Form.Label>\r\n                <FormControl value={trigger.target_node} onChange={update_trigger_name} />\r\n            </FormGroup>\r\n            <EffectBuilder\r\n                title=\"On Trigger Effects\"\r\n                effects={trigger.on_trigger_effects}\r\n                handleEffectAdded={added => addEffect(\"on_trigger_effects\", added)}\r\n                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_trigger_effects\", old, prop, new_value)}\r\n                handleEffectDeleted={deleted => deleteEffect(\"on_trigger_effects\", deleted)} />\r\n            <RequirementsBuilder\r\n                title=\"Trigger Requirements\"\r\n                requirements={props.trigger.requirements}\r\n                handleRequirementAdded={addRequirement}\r\n                handleRequirementDeleted={deleteRequirement}\r\n                handleRequirementsChanged={updateRequirements}\r\n            />\r\n        </ListGroupItem>\r\n\r\n    )\r\n}","import React,{useEffect, useRef, useState} from 'react'\r\nimport { Button, Col, Container, Row, Tab, Nav, FormControl, FormGroup, Form, Card, ListGroup, } from 'react-bootstrap'\r\nimport {useRecoilState} from 'recoil'\r\nimport {AdventureState,NodesSelector,NodeData,TriggersSelector,TriggerData, unique_id} from './../State'\r\nimport {updateProp} from './../Helpers'\r\nimport {AdventureNode} from './AdventureNode'\r\nimport {AdventureTrigger} from './AdventureTrigger'\r\n\r\nexport function AdventureEditor() {\r\n    const [adventure,setAdventure] = useRecoilState(AdventureState);\r\n    const [nodes] = useRecoilState(NodesSelector)\r\n    const [triggers] = useRecoilState(TriggersSelector)\r\n\r\n    const [activeTab,setActiveTab] = useState(\"\")\r\n   \r\n    const add_node = () => {\r\n      const modified_adventure = {...adventure,\r\n        nodes:[...nodes,new NodeData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n    }\r\n    const delete_node = (node) => {\r\n      const changed_nodes = nodes.filter(x => x !== node)\r\n      setAdventure(updateProp(adventure,\"nodes\",changed_nodes))\r\n    }\r\n\r\n    useEffect(() => {\r\n      if(nodes.length && !adventure.starting_node){\r\n        setAdventure(updateProp(adventure,\"starting_node\",nodes[0].name))\r\n      }\r\n      if(nodes.length && (!activeTab || !nodes.find(x => x.id === activeTab))){\r\n        setActiveTab(nodes[0].id)\r\n      }\r\n    },[nodes,activeTab,adventure,setAdventure])\r\n\r\n    const add_trigger = () => {\r\n      const modified_adventure = {...adventure,\r\n        triggers:[...triggers,new TriggerData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n\r\n    }\r\n    const delete_trigger = (trigger) => {\r\n      const changed_triggers = triggers.filter(x => x !== trigger)\r\n      setAdventure(updateProp(adventure,\"triggers\",changed_triggers))\r\n      \r\n    }\r\n\r\n    \r\n    const handleExport = () => {\r\n      const data_object = {\r\n        adventure_name: adventure.name,\r\n        starting_node: adventure.starting_node,\r\n        nodes: nodes\r\n      }\r\n      //Internal stuff, byond doesn't care about this\r\n      const remove_ids = (key, value) => {\r\n        if (key === \"id\")\r\n          return undefined\r\n        return value;\r\n      }\r\n      const blob = new Blob([JSON.stringify(data_object, remove_ids)], { type: 'application/json' })\r\n      const blob_url = URL.createObjectURL(blob)\r\n      window.open(blob_url)\r\n    }\r\n  \r\n    const handleImport = e => {\r\n      var reader = new FileReader()\r\n      reader.onload = (e) =>{\r\n        const generate_ids = (key,value) => {\r\n          if(value === Object(value)) //Thanks StackOverflow\r\n          {\r\n            value.id = unique_id(\"import\")\r\n          }\r\n          return value\r\n        }\r\n        const result = JSON.parse(e.target.result,generate_ids)\r\n  \r\n        const modified_adventure = {...adventure,\r\n          name:result.adventure_name,\r\n          starting_node:result.starting_node,\r\n          triggers:result.triggers,\r\n          nodes:result.nodes\r\n        }\r\n        setAdventure(modified_adventure)\r\n      }\r\n      reader.readAsText(e.target.files[0])\r\n    }\r\n\r\n    const ImportInput = useRef()\r\n    const clickImport = () => {\r\n      ImportInput.current.click()\r\n    }\r\n\r\n    const [draggedItem,setDraggedItem] = useState(null)\r\n\r\n    const start_dragging = (e,node) => {\r\n      setDraggedItem(node)\r\n    } \r\n\r\n    const end_dragging = (e,node) => {\r\n      setDraggedItem(null)\r\n    }\r\n\r\n    const switch_node = (node) => {\r\n      if(draggedItem != null){\r\n        const index_a = nodes.indexOf(node)\r\n        const index_b = nodes.indexOf(draggedItem)\r\n        const modified_nodes = nodes.slice();\r\n        [modified_nodes[index_a],modified_nodes[index_b]] = [modified_nodes[index_b],modified_nodes[index_a]]\r\n        setAdventure(updateProp(adventure,\"nodes\",modified_nodes))\r\n      }\r\n    }\r\n\r\n    const validate_drop = (e,node) => {\r\n      if(draggedItem != null && node !== draggedItem){\r\n        e.preventDefault()\r\n      }\r\n    }\r\n  \r\n    return (\r\n    <Container fluid=\"xl\">\r\n      <Form>\r\n        <FormGroup>\r\n          <Form.Label>Adventure name</Form.Label>\r\n          <FormControl placeholder=\"New adventure\" value={adventure.name} onChange={(e) => setAdventure(updateProp(adventure,\"name\",e.target.value))} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Form.Label>Starting node</Form.Label>\r\n          <FormControl as=\"select\" value={adventure.starting_node} onChange={(e) => setAdventure(updateProp(adventure,\"starting_node\",e.target.value))}>\r\n            {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n          </FormControl>\r\n        </FormGroup>\r\n      </Form>\r\n      <Tab.Container id=\"nodes\" activeKey={activeTab} onSelect={e => setActiveTab(e)}>\r\n        <Row>\r\n          <Col>\r\n            <Nav variant=\"tabs\">\r\n              {nodes.map(node => (\r\n                <Nav.Item \r\n                  key={node.id} \r\n                  draggable \r\n                  onDragEnd={e => end_dragging(e,node)} \r\n                  onDragStart={e => start_dragging(e,node)} \r\n                  onDrop={e => switch_node(node)}\r\n                  onDragOver={e => validate_drop(e,node)}\r\n                  >\r\n                  <Nav.Link eventKey={node.id}>{node.name}</Nav.Link>\r\n                </Nav.Item>))}\r\n              <Nav.Item>\r\n                <Nav.Link onClick={add_node}>Add Node</Nav.Link>\r\n              </Nav.Item>\r\n            </Nav>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <Tab.Content>\r\n                {nodes.map(node => (\r\n                  <Tab.Pane eventKey={node.id} key={node.id}>\r\n                    <AdventureNode \r\n                      node={node}\r\n                      handleNodeDeletion={() => delete_node(node)}\r\n                      />\r\n                  </Tab.Pane>))}\r\n              </Tab.Content>\r\n          </Col>\r\n        </Row>\r\n      </Tab.Container>\r\n      <Row>\r\n        <Container class=\"border border-primary\">\r\n          <Col>\r\n          <Row>\r\n            Triggers\r\n          </Row>\r\n          <Row>\r\n            <ListGroup>\r\n              {triggers.map(trigger => (\r\n                <AdventureTrigger trigger={trigger} handleDeletion={() => delete_trigger(trigger)}/>\r\n              ))}\r\n            <ListGroup.Item>\r\n              <Button onClick={add_trigger}>Add Trigger</Button>\r\n            </ListGroup.Item>\r\n            </ListGroup>\r\n          </Row>\r\n          </Col>\r\n        </Container>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Button onClick={handleExport}>Export</Button>\r\n          <Button onClick={clickImport}>Import</Button>\r\n          <Form.File\r\n            onChange={handleImport}\r\n            accept=\".json\"\r\n            ref={ImportInput}\r\n            style ={{display:\"none\"}}/>\r\n        </Col>\r\n      </Row>\r\n    </Container>)\r\n  }","import './App.css';\r\nimport {RecoilRoot} from 'recoil'\r\nimport {AdventureEditor} from './Components/AdventureEditor'\r\n\r\n/*\r\nTODO:\r\nRandom value in effects support.\r\nBasic validation of loops/invalid node ids and such.\r\nStyling this to look good aaahhh!!!\r\n*/\r\n\r\nfunction App(){\r\n  return (\r\n    <RecoilRoot>\r\n      <AdventureEditor/>\r\n    </RecoilRoot>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}