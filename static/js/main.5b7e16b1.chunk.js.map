{"version":3,"sources":["Helpers.js","State.js","Components/EffectBuilder.js","Components/RequirementsBuilder.js","Components/AdventureChoice.js","Components/AdventureNode.js","signal_lost.png","Components/AdventureTrigger.js","Components/AdventureEditor.js","App.js","reportWebVitals.js","index.js"],"names":["replaceItemInArray","arr","oldVal","newValue","modifed","slice","indexOf","updateProp","obj","prop_name","new_value","global_ids","unique_id","category","NodeData","this","id","name","description","choices","image","image_raw","undefined","on_enter_effects","on_exit_effects","TriggerData","target_node","on_trigger_effects","ChoiceData","exit_node","on_selection_effects","requirements","EffectData","effect_type","quality","value","ReqGroupData","group_type","ReqData","operator","AdventureState","atom","key","default","starting_node","nodes","triggers","required_traits","loot_types","scanner_band_modifiers","NodesSelector","selector","get","NodeSelector","selectorFamily","find","x","set","current","modified","TriggersSelector","TriggerSelector","Effect","props","handleChange","handleDelete","InputGroup","FormControl","as","effect","onChange","e","target","Prepend","Text","Append","Button","variant","onClick","EffectBuilder","handleEffectsChanged","handleEffectAdded","handleEffectDeleted","add_effect","effects","Card","Header","title","ListGroup","map","ListGroupItem","prop","RequirementsBuilder","handleRequirementsChanged","handleRequirementAdded","handleRequirementDeleted","add_req","req","ReqGroup","group","handleReqGroupChanged","handleReqGroupDeleted","SingleReq","requirement","handleReqChanged","handleReqDeleted","Item","ButtonGroup","deleteSubReq","deleted","new_reqs","filter","updateSubReq","old_req","changed_req","border","new_group","new_req","AdventureChoice","handleChoiceDeletion","handleChoiceChange","useRecoilValue","useState","choice","exitNodeSelectValue","setExitNodeSelectValue","Body","node","added","effect_prop","new_effect","old_effects","new_effects","addEffect","old","old_effect","changed_prop","changed_effect","updateEffects","removed","length","deleteEffect","old_reqs","AdventureNode","handleNodeDeletion","useRecoilState","setNode","current_image","raw_image","imageInput","useRef","image_name_text","CardGroup","Title","Img","src","Form","Control","readOnly","File","type","accept","ref","reader","FileReader","onload","uploaded_image","Image","width","height","modified_node","result","alert","readAsDataURL","files","style","display","click","FormGroup","Label","rows","placeholder","parent_id","new_choices","removeChoice","choice_property","new_choice","old_choice","updateChoice","addChoice","AdventureTrigger","handleDeletion","trigger","setTrigger","update_trigger_name","AdventureEditor","adventure","setAdventure","activeTab","setActiveTab","useEffect","ImportInput","draggedItem","setDraggedItem","Container","fluid","Tab","activeKey","onSelect","Row","Col","Nav","draggable","onDragEnd","onDragStart","start_dragging","onDrop","index_a","index_b","modified_nodes","switch_node","onDragOver","preventDefault","validate_drop","Link","eventKey","modified_adventure","Content","Pane","changed_nodes","delete_node","class","changed_triggers","delete_trigger","data_object","adventure_name","blob","Blob","JSON","stringify","blob_url","URL","createObjectURL","window","open","parse","Object","readAsText","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b7e16b1.chunk.js","sourcesContent":["//Helpers\r\nexport function replaceItemInArray(arr, oldVal, newValue) {\r\n    const modifed = arr.slice()\r\n    modifed[arr.indexOf(oldVal)] = newValue\r\n    return modifed\r\n}\r\n\r\nexport function updateProp(obj, prop_name, new_value) {\r\n    return { ...obj, [prop_name]: new_value }\r\n}","import { atom, selector, selectorFamily} from 'recoil'\r\nimport {replaceItemInArray} from './Helpers'\r\n\r\n/// Eugh\r\nexport const global_ids = {};\r\nexport function unique_id(category) {\r\n    category in global_ids ? global_ids[category] += 1 : global_ids[category] = 0\r\n    return global_ids[category]\r\n}\r\n\r\n//Data classes\r\nexport class AdventureData {\r\n    constructor() {\r\n        this.name = \"New adventure\"\r\n        this.starting_node = \"\"\r\n        this.nodes = []\r\n        this.triggers = []\r\n        this.required_traits = []\r\n        this.loot_types = []\r\n        this.scanner_band_modifiers = []\r\n    }\r\n}\r\n\r\nexport class NodeData {\r\n    constructor() {\r\n        this.id = unique_id(\"node\")\r\n        this.name = \"Node \" + this.id\r\n        this.description = \"Node description goes here\"\r\n        this.choices = []\r\n        this.image = \"default\"\r\n        this.image_raw = undefined\r\n        this.on_enter_effects = undefined\r\n        this.on_exit_effects = undefined\r\n    }\r\n}\r\n\r\nexport class TriggerData{\r\n    constructor(){\r\n        this.id = unique_id(\"trigger\")\r\n        this.name = \"Trigger\"\r\n        this.target_node = undefined\r\n        this.on_trigger_effects = undefined\r\n    }\r\n}\r\n\r\nexport class ChoiceData {\r\n    constructor() {\r\n        this.id = unique_id(\"choice\")\r\n        this.name = \"New Choice\"\r\n        this.exit_node = \"FAIL\"\r\n        this.on_selection_effects = undefined\r\n        this.requirements = undefined\r\n    }\r\n}\r\n\r\nexport class EffectData {\r\n    constructor() {\r\n        this.id = unique_id(\"effect\")\r\n        this.effect_type = \"Add\"\r\n        this.quality = \"Quality\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport class ReqGroupData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.group_type = \"AND\"\r\n        this.requirements = []\r\n    }\r\n}\r\n\r\nexport class ReqData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.quality = \"Quality\"\r\n        this.operator = \"==\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport const AdventureState = atom({\r\n    key: \"adventure\",\r\n    default: new AdventureData(),\r\n})\r\n\r\nexport const NodesSelector = selector({\r\n    key: \"nodes\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.nodes\r\n    }\r\n})\r\n\r\nexport const NodeSelector = selectorFamily({\r\n    key: \"single_node\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.nodes.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, nodes: replaceItemInArray(current.nodes, current.nodes.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n\r\nexport const TriggersSelector = selector({\r\n    key: \"triggers\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.triggers\r\n    }\r\n})\r\n\r\nexport const TriggerSelector = selectorFamily({\r\n    key: \"single_trigger\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.triggers.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, triggers: replaceItemInArray(current.triggers, current.triggers.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n","import { Button, Card, ListGroup, FormControl, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { EffectData } from './../State'\r\n\r\nfunction Effect(props) {\r\n    const handleChange = props.handleChange\r\n    const handleDelete = props.handleDelete\r\n\r\n    return (\r\n        <InputGroup>\r\n            <FormControl as=\"select\" value={props.effect.effect_type} onChange={e => handleChange(\"effect_type\", e.target.value)}>\r\n                <option>add</option>\r\n                <option>remove</option>\r\n                <option>set</option>\r\n            </FormControl>\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Quality</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.quality} onChange={e => handleChange(\"quality\", e.target.value)} />\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Value</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.value} onChange={e => handleChange(\"value\", e.target.value)} />\r\n            <InputGroup.Append>\r\n                <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\r\n            </InputGroup.Append>\r\n        </InputGroup>)\r\n}\r\n\r\nexport function EffectBuilder(props) {\r\n    const handleEffectsChanged = props.handleEffectsChanged\r\n    const handleEffectAdded = props.handleEffectAdded\r\n    const handleEffectDeleted = props.handleEffectDeleted\r\n    function add_effect() {\r\n        handleEffectAdded(new EffectData())\r\n    }\r\n\r\n    if (!props.effects)\r\n        return (\r\n            <InputGroup>\r\n                <InputGroup.Prepend>\r\n                    <InputGroup.Text>\r\n                        {props.title}\r\n                    </InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                    <Button onClick={add_effect}>Create Effect</Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        )\r\n    return (\r\n        <>\r\n            <Card.Header>{props.title}</Card.Header>\r\n            <ListGroup>\r\n                {props.effects.map(effect => (\r\n                    <ListGroupItem key={effect.id}>\r\n                        <Effect\r\n                            effect={effect}\r\n                            handleChange={(prop, value) => handleEffectsChanged(effect, prop, value)}\r\n                            handleDelete={(prop, value) => handleEffectDeleted(effect, prop, value)} />\r\n                    </ListGroupItem>))}\r\n                <ListGroupItem>\r\n                    <Button onClick={add_effect}>Add New Effect</Button>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n        </>)\r\n}","import {ReqGroupData,ReqData} from '../State'\r\nimport {InputGroup,Button,Card,ListGroup,FormControl,ButtonGroup} from 'react-bootstrap'\r\n\r\nexport function RequirementsBuilder(props) {\r\n    const handleRequirementsChanged = props.handleRequirementsChanged\r\n    const handleRequirementAdded = props.handleRequirementAdded\r\n    const handleRequirementDeleted = props.handleRequirementDeleted\r\n  \r\n    function add_req_group() {\r\n      handleRequirementAdded(new ReqGroupData())\r\n    }\r\n  \r\n    function add_req() {\r\n      handleRequirementAdded(new ReqData())\r\n    }\r\n  \r\n    if (!props.requirements) {\r\n      return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>\r\n            {props.title}\r\n          </InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <InputGroup.Append>\r\n          <Button onClick={add_req}>Add Requirements</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>)\r\n    }\r\n    return (\r\n      <>\r\n      <Card.Header>{props.title}</Card.Header>\r\n      <ListGroup>\r\n        {props.requirements.map(req => {\r\n          return req.requirements ? (\r\n            <ReqGroup\r\n              key={req.id} \r\n              group={req}\r\n              handleReqGroupChanged={(prop_name,new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqGroupDeleted={() => handleRequirementDeleted(req)}\r\n              />) :\r\n            (<SingleReq \r\n              key={req.id}\r\n              requirement={req}\r\n              handleReqChanged={(prop_name, new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqDeleted={() => handleRequirementDeleted(req)}\r\n            />)\r\n        })}\r\n        <ListGroup.Item>\r\n          <ButtonGroup>\r\n            <Button onClick={add_req_group}>Add Req Group</Button>\r\n            <Button onClick={add_req}>Add Single Req</Button>\r\n          </ButtonGroup>\r\n        </ListGroup.Item>\r\n      </ListGroup></>)\r\n  }\r\n\r\n\r\n  \r\n  function SingleReq(props) {\r\n    const handleReqDeleted = props.handleReqDeleted\r\n    const handleReqChanged = props.handleReqChanged\r\n    return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>Quality</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <FormControl value={props.requirement.quality} onChange={e => handleReqChanged(\"quality\", e.target.value)} />\r\n        <FormControl as=\"select\" value={props.requirement.operator} onChange={e => handleReqChanged(\"operator\", e.target.value)}>\r\n          <option>==</option>\r\n          <option>!=</option>\r\n          <option>&gt;</option>\r\n          <option>&lt;</option>\r\n          <option>&gt;=</option>\r\n          <option>&lt;=</option>\r\n        </FormControl>\r\n        <FormControl value={props.requirement.value} onChange={e => handleReqChanged(\"value\", e.target.value)}/>\r\n        <InputGroup.Append>\r\n          <Button variant=\"danger\" onClick={() => handleReqDeleted(props.requirement)}>Delete</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    )\r\n  }\r\n  \r\n  function ReqGroup(props) {\r\n    const handleReqGroupDeleted = props.handleReqGroupDeleted\r\n    const handleReqGroupChanged = props.handleReqGroupChanged\r\n\r\n    const addSubGroup = () => {\r\n      const new_group = new ReqGroupData()\r\n      const new_reqs = [...props.group.requirements, new_group]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const addSubReq = () => {\r\n      const new_req = new ReqData()\r\n      const new_reqs = [...props.group.requirements, new_req]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const deleteSubReq = (deleted) =>{\r\n      const new_reqs = props.group.requirements.filter(x => x !== deleted)\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const updateSubReq = (old_req,prop,new_value) =>{\r\n      const changed_req = {...old_req, [prop]:new_value}\r\n      const new_reqs = props.group.requirements.slice()\r\n      new_reqs[props.group.requirements.indexOf(old_req)] = changed_req\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    return (\r\n      <Card border=\"dark\">\r\n        <Card.Header>\r\n          <InputGroup>\r\n            <FormControl as=\"select\" value={props.group.group_type} onChange={e => handleReqGroupChanged(\"group_type\",e.target.value)}> \r\n              <option>AND</option>\r\n              <option>OR</option>\r\n            </FormControl>\r\n            <InputGroup.Text>Group</InputGroup.Text>\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={() => handleReqGroupDeleted(props.group)} >Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </Card.Header>\r\n        <ListGroup>\r\n          <ListGroup.Item>\r\n            {props.group.requirements.map(req =>{\r\n              return req.requirements ? \r\n                (<ReqGroup\r\n                  key={req.id}\r\n                  group={req}\r\n                  handleReqGroupDeleted={deleteSubReq}\r\n                  handleReqGroupChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />) : \r\n                (<SingleReq\r\n                  key={req.id} \r\n                  requirement={req}\r\n                  handleReqDeleted={deleteSubReq}\r\n                  handleReqChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />)\r\n            })}\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <ButtonGroup>\r\n              <Button onClick={addSubGroup}>Add Req Group</Button>\r\n              <Button onClick={addSubReq}>Add Single Req</Button>\r\n            </ButtonGroup>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n      </Card>\r\n    )\r\n  }","import React,{useState} from 'react'\r\nimport {Button, Card, InputGroup, FormControl } from 'react-bootstrap'\r\nimport {useRecoilValue} from 'recoil'\r\nimport {NodesSelector} from './../State'\r\nimport {EffectBuilder} from './EffectBuilder'\r\nimport {RequirementsBuilder} from './RequirementsBuilder'\r\n\r\nexport function AdventureChoice(props) {\r\n    const handleChoiceDeletion = props.handleChoiceDeletion\r\n    const handleChoiceChange = props.handleChoiceChange\r\n  \r\n  \r\n    const addEffect = (effect_prop, new_effect) => {\r\n      const old_effects = props.choice[effect_prop]\r\n      const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n      const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n      const new_effects = props.choice[effect_prop].slice()\r\n      new_effects[props.choice[effect_prop].indexOf(old_effect)] = changed_effect\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const deleteEffect = (effect_prop, removed) => {\r\n      const new_effects = props.choice[effect_prop].filter(x => x !== removed)\r\n      handleChoiceChange(effect_prop, new_effects.length ? new_effects : undefined)\r\n    }\r\n  \r\n  \r\n    const addRequirement = added => {\r\n      const old_reqs = props.choice.requirements\r\n      const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const deleteRequirement = removed => {\r\n      const new_reqs = props.choice.requirements.filter(x => x !== removed)\r\n      handleChoiceChange(\"requirements\", new_reqs.length ? new_reqs : undefined)\r\n    }\r\n  \r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n      const changed_req = { ...old_req, [changed_prop]: new_value }\r\n      const new_reqs = props.choice.requirements.slice()\r\n      new_reqs[props.choice.requirements.indexOf(old_req)] = changed_req\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const nodes = useRecoilValue(NodesSelector)\r\n    const [exitNodeSelectValue, setExitNodeSelectValue] = useState(props.choice.exit_node);\r\n  \r\n    const changeExitNode = (e) => {\r\n      setExitNodeSelectValue(e.target.value)\r\n      handleChoiceChange(\"exit_node\", e.target.value)\r\n    }\r\n  \r\n  \r\n    return (\r\n      <Card>\r\n        <Card.Body>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Choice</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.choice.name} onChange={(e) => handleChoiceChange(\"name\", e.target.value)} />\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={handleChoiceDeletion}>Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Exit Node</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl as=\"select\" value={exitNodeSelectValue} onChange={changeExitNode}>\r\n              <option>FAIL</option>\r\n              <option>WIN</option>\r\n              {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n            </FormControl>\r\n          </InputGroup>\r\n          <EffectBuilder\r\n              title=\"Selection Effects\"\r\n              effects={props.choice.on_selection_effects}\r\n              handleEffectAdded={added => addEffect(\"on_selection_effects\", added)}\r\n              handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_selection_effects\", old, prop, new_value)}\r\n              handleEffectDeleted={deleted => deleteEffect(\"on_selection_effects\", deleted)}/>\r\n          <RequirementsBuilder\r\n            title=\"Requirements\"\r\n            requirements={props.choice.requirements}\r\n            handleRequirementAdded={addRequirement}\r\n            handleRequirementDeleted={deleteRequirement}\r\n            handleRequirementsChanged={updateRequirements}\r\n          />\r\n        </Card.Body>\r\n      </Card>)\r\n  }","import React, { useRef } from 'react';\r\nimport { Button, Col, Container, Row, Card,CardGroup, ListGroup, FormControl, FormGroup, Form, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport default_image from '../signal_lost.png'\r\nimport { updateProp } from '../Helpers'\r\nimport { NodeSelector, ChoiceData } from '../State'\r\nimport { AdventureChoice } from './AdventureChoice'\r\nimport { EffectBuilder } from './EffectBuilder'\r\n\r\n\r\nexport function AdventureNode(props) {\r\n    const handleNodeDeletion = props.handleNodeDeletion\r\n\r\n    const [node, setNode] = useRecoilState(NodeSelector(props.node.id))\r\n\r\n    const update_node_name = (e) => {\r\n        const modified_node = updateProp(node, \"name\", e.target.value)\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const addChoice = (new_choice) => {\r\n        const new_choices = [...props.node.choices, new_choice]\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const removeChoice = (removed) => {\r\n        const new_choices = props.node.choices.filter(x => x !== removed)\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n    const updateChoice = (old_choice, new_choice) => {\r\n        const new_choices = props.node.choices.slice()\r\n        new_choices[props.node.choices.indexOf(old_choice)] = new_choice\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.node[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.node[effect_prop].slice()\r\n        new_effects[props.node[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.node[effect_prop].filter(x => x !== removed)\r\n        setNode(updateProp(node, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const current_image = node.raw_image ? node.raw_image : default_image\r\n    const imageInput = useRef()\r\n    const try_uploading_image = () => {\r\n        imageInput.current.click() //god why\r\n    }\r\n\r\n    const setUploadedImage = (e) => {\r\n        var reader = new FileReader()\r\n        reader.onload = (e) => {\r\n            var uploaded_image = new Image()\r\n            uploaded_image.onload = () =>{\r\n                if(uploaded_image.width !== 200 || uploaded_image.height !== 100){\r\n                    alert(`Adventure images need to be be 200x100 pngs.`)\r\n                    return\r\n                }\r\n                const modified_node = {...node,\r\n                    raw_image:e.target.result,\r\n                    image:null\r\n                }\r\n                setNode(modified_node)\r\n            }\r\n            uploaded_image.src = e.target.result\r\n        }\r\n        reader.readAsDataURL(e.target.files[0])\r\n    }\r\n\r\n    const reset_image = (e) => {\r\n        const modified_node = {...node,\r\n            raw_image:undefined,\r\n            image:\"default\"\r\n        }\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const update_image = e => {\r\n        setNode(updateProp(node,\"image\",e.target.value))\r\n    }\r\n\r\n    const image_name_text = node.raw_image ? \"custom image data\" : node.image\r\n    return (\r\n        <CardGroup>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Title>{node.name} <Button variant=\"danger\" onClick={handleNodeDeletion}>Delete</Button></Card.Title>\r\n                            <Card.Img variant=\"top\" src={current_image}  />\r\n                            <InputGroup>\r\n                                <InputGroup.Prepend>\r\n                                    <InputGroup.Text>Image</InputGroup.Text>\r\n                                </InputGroup.Prepend>\r\n                                <Form.Control value={image_name_text} readOnly={node.raw_image !== undefined} onChange={update_image}/>\r\n                                <Form.File type='file' accept=\"image/png\" ref={imageInput} onChange={setUploadedImage} style={{display:\"none\"}}/>\r\n                                <InputGroup.Append>\r\n                                    <Button onClick={try_uploading_image}>Custom</Button>\r\n                                    <Button onClick={reset_image}>Reset</Button>\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Node ID</Form.Label>\r\n                                <FormControl value={node.name} onChange={update_node_name} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Description</Form.Label>\r\n                                <FormControl as=\"textarea\" rows={5} placeholder=\"Describe whatever here.\" value={node.description} onChange={(e) => setNode(updateProp(node, \"description\", e.target.value))} />\r\n                            </FormGroup>\r\n                            <EffectBuilder\r\n                                title=\"On Enter Effects\"\r\n                                effects={node.on_enter_effects}\r\n                                handleEffectAdded={added => addEffect(\"on_enter_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_enter_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_enter_effects\", deleted)} />\r\n                            <EffectBuilder\r\n                                title=\"On Exit Effects\"\r\n                                effects={node.on_exit_effects}\r\n                                parent_id={node.id}\r\n                                handleEffectAdded={added => addEffect(\"on_exit_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_exit_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_exit_effects\", deleted)} />\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Header>Choices</Card.Header>\r\n                            <ListGroup>\r\n                                {node.choices.map(choice => (\r\n                                    <ListGroup.Item key={choice.id}>\r\n                                        <AdventureChoice\r\n                                            choice={choice}\r\n                                            handleChoiceDeletion={() => removeChoice(choice)}\r\n                                            handleChoiceChange={(choice_property, new_value) => {\r\n                                                const new_choice = { ...choice, [choice_property]: new_value }\r\n                                                updateChoice(choice, new_choice)\r\n                                            }}\r\n                                        />\r\n                                    </ListGroup.Item>))}\r\n                                <ListGroupItem><Button onClick={() => addChoice(new ChoiceData())}>Add Choice</Button></ListGroupItem>\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n            </CardGroup>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC\"","import React, { useRef } from 'react';\r\nimport { Button, Col, Container, Row, Card, CardGroup, ListGroup, FormControl, FormGroup, Form, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport { updateProp } from '../Helpers'\r\nimport { TriggerSelector } from '../State'\r\nimport { RequirementsBuilder } from './RequirementsBuilder'\r\nimport { EffectBuilder } from './EffectBuilder'\r\n\r\n\r\nexport function AdventureTrigger(props) {\r\n    const handleDeletion = props.handleDeletion\r\n\r\n    const [trigger, setTrigger] = useRecoilState(TriggerSelector(props.trigger.id))\r\n\r\n    const update_trigger_name = (e) => {\r\n        setTrigger(updateProp(trigger, \"name\", e.target.value))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.trigger[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.trigger[effect_prop].slice()\r\n        new_effects[props.trigger[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.trigger[effect_prop].filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const addRequirement = added => {\r\n        const old_reqs = props.trigger.requirements\r\n        const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n        setTrigger(updateProp(trigger,\"requirements\", new_reqs))\r\n    }\r\n\r\n    const deleteRequirement = removed => {\r\n        const new_reqs = props.trigger.requirements.filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs.length ? new_reqs : undefined))\r\n    }\r\n\r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n        const changed_req = { ...old_req, [changed_prop]: new_value }\r\n        const new_reqs = props.trigger.requirements.slice()\r\n        new_reqs[props.trigger.requirements.indexOf(old_req)] = changed_req\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs))\r\n    }\r\n\r\n\r\n    return (\r\n        <ListGroupItem>\r\n            <FormGroup>\r\n                <Form.Label>Trigger ID</Form.Label>\r\n                <FormControl value={trigger.name} onChange={update_trigger_name} />\r\n                <Button variant=\"danger\" onClick={handleDeletion}>Delete</Button>\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Form.Label>Target Node On Trigger</Form.Label>\r\n                <FormControl value={trigger.target_node} onChange={update_trigger_name} />\r\n            </FormGroup>\r\n            <EffectBuilder\r\n                title=\"On Trigger Effects\"\r\n                effects={trigger.on_trigger_effects}\r\n                handleEffectAdded={added => addEffect(\"on_trigger_effects\", added)}\r\n                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_trigger_effects\", old, prop, new_value)}\r\n                handleEffectDeleted={deleted => deleteEffect(\"on_trigger_effects\", deleted)} />\r\n            <RequirementsBuilder\r\n                title=\"Trigger Requirements\"\r\n                requirements={props.trigger.requirements}\r\n                handleRequirementAdded={addRequirement}\r\n                handleRequirementDeleted={deleteRequirement}\r\n                handleRequirementsChanged={updateRequirements}\r\n            />\r\n        </ListGroupItem>\r\n\r\n    )\r\n}","import React,{useEffect, useRef, useState} from 'react'\r\nimport { Button, Col, Container, Row, Tab, Nav, FormControl, FormGroup, Form, Card, ListGroup, } from 'react-bootstrap'\r\nimport {useRecoilState} from 'recoil'\r\nimport {AdventureState,NodesSelector,NodeData,TriggersSelector,TriggerData, unique_id} from './../State'\r\nimport {updateProp} from './../Helpers'\r\nimport {AdventureNode} from './AdventureNode'\r\nimport {AdventureTrigger} from './AdventureTrigger'\r\n\r\nexport function AdventureEditor() {\r\n    const [adventure,setAdventure] = useRecoilState(AdventureState);\r\n    const [nodes] = useRecoilState(NodesSelector)\r\n    const [triggers] = useRecoilState(TriggersSelector)\r\n\r\n    const [activeTab,setActiveTab] = useState(\"\")\r\n   \r\n    const add_node = () => {\r\n      const modified_adventure = {...adventure,\r\n        nodes:[...nodes,new NodeData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n    }\r\n    const delete_node = (node) => {\r\n      const changed_nodes = nodes.filter(x => x !== node)\r\n      setAdventure(updateProp(adventure,\"nodes\",changed_nodes))\r\n    }\r\n\r\n    useEffect(() => {\r\n      if(nodes.length && !adventure.starting_node){\r\n        setAdventure(updateProp(adventure,\"starting_node\",nodes[0].name))\r\n      }\r\n      if(nodes.length && (!activeTab || !nodes.find(x => x.id === activeTab))){\r\n        setActiveTab(nodes[0].id)\r\n      }\r\n    },[nodes,activeTab,adventure,setAdventure])\r\n\r\n    const add_trigger = () => {\r\n      const modified_adventure = {...adventure,\r\n        triggers:[...triggers,new TriggerData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n\r\n    }\r\n    const delete_trigger = (trigger) => {\r\n      const changed_triggers = triggers.filter(x => x !== trigger)\r\n      setAdventure(updateProp(adventure,\"triggers\",changed_triggers))\r\n      \r\n    }\r\n\r\n    \r\n    const handleExport = () => {\r\n      const data_object = {\r\n        adventure_name: adventure.name,\r\n        starting_node: adventure.starting_node,\r\n        nodes: nodes\r\n      }\r\n      //Internal stuff, byond doesn't care about this\r\n      const remove_ids = (key, value) => {\r\n        if (key === \"id\")\r\n          return undefined\r\n        return value;\r\n      }\r\n      const blob = new Blob([JSON.stringify(data_object, remove_ids)], { type: 'application/json' })\r\n      const blob_url = URL.createObjectURL(blob)\r\n      window.open(blob_url)\r\n    }\r\n  \r\n    const handleImport = e => {\r\n      var reader = new FileReader()\r\n      reader.onload = (e) =>{\r\n        const generate_ids = (key,value) => {\r\n          if(value === Object(value)) //Thanks StackOverflow\r\n          {\r\n            value.id = unique_id(\"import\")\r\n          }\r\n          return value\r\n        }\r\n        const result = JSON.parse(e.target.result,generate_ids)\r\n  \r\n        const modified_adventure = {...adventure,\r\n          name:result.adventure_name,\r\n          starting_node:result.starting_node,\r\n          triggers:result.triggers,\r\n          nodes:result.nodes\r\n        }\r\n        setAdventure(modified_adventure)\r\n      }\r\n      reader.readAsText(e.target.files[0])\r\n    }\r\n\r\n    const ImportInput = useRef()\r\n    const clickImport = () => {\r\n      ImportInput.current.click()\r\n    }\r\n\r\n    const [draggedItem,setDraggedItem] = useState(null)\r\n\r\n    const start_dragging = (e,node) => {\r\n      setDraggedItem(node)\r\n    } \r\n\r\n    const end_dragging = (e,node) => {\r\n      setDraggedItem(null)\r\n    }\r\n\r\n    const switch_node = (node) => {\r\n      if(draggedItem != null){\r\n        const index_a = nodes.indexOf(node)\r\n        const index_b = nodes.indexOf(draggedItem)\r\n        const modified_nodes = nodes.slice();\r\n        [modified_nodes[index_a],modified_nodes[index_b]] = [modified_nodes[index_b],modified_nodes[index_a]]\r\n        setAdventure(updateProp(adventure,\"nodes\",modified_nodes))\r\n      }\r\n    }\r\n\r\n    const validate_drop = (e,node) => {\r\n      if(draggedItem != null && node !== draggedItem){\r\n        e.preventDefault()\r\n      }\r\n    }\r\n  \r\n    return (\r\n    <Container fluid=\"xl\">\r\n      <Form>\r\n        <FormGroup>\r\n          <Form.Label>Adventure name</Form.Label>\r\n          <FormControl placeholder=\"New adventure\" value={adventure.name} onChange={(e) => setAdventure(updateProp(adventure,\"name\",e.target.value))} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Form.Label>Starting node</Form.Label>\r\n          <FormControl as=\"select\" value={adventure.starting_node} onChange={(e) => setAdventure(updateProp(adventure,\"starting_node\",e.target.value))}>\r\n            {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n          </FormControl>\r\n        </FormGroup>\r\n      </Form>\r\n      <Tab.Container id=\"nodes\" activeKey={activeTab} onSelect={e => setActiveTab(e)}>\r\n        <Row>\r\n          <Col>\r\n            <Nav variant=\"tabs\">\r\n              {nodes.map(node => (\r\n                <Nav.Item \r\n                  key={node.id} \r\n                  draggable \r\n                  onDragEnd={e => end_dragging(e,node)} \r\n                  onDragStart={e => start_dragging(e,node)} \r\n                  onDrop={e => switch_node(node)}\r\n                  onDragOver={e => validate_drop(e,node)}\r\n                  >\r\n                  <Nav.Link eventKey={node.id}>{node.name}</Nav.Link>\r\n                </Nav.Item>))}\r\n              <Nav.Item>\r\n                <Nav.Link onClick={add_node}>Add Node</Nav.Link>\r\n              </Nav.Item>\r\n            </Nav>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <Tab.Content>\r\n                {nodes.map(node => (\r\n                  <Tab.Pane eventKey={node.id} key={node.id}>\r\n                    <AdventureNode \r\n                      node={node}\r\n                      handleNodeDeletion={() => delete_node(node)}\r\n                      />\r\n                  </Tab.Pane>))}\r\n              </Tab.Content>\r\n          </Col>\r\n        </Row>\r\n      </Tab.Container>\r\n      <Row>\r\n        <Container class=\"border border-primary\">\r\n          <Col>\r\n          <Row>\r\n            Triggers\r\n          </Row>\r\n          <Row>\r\n            <ListGroup>\r\n              {triggers.map(trigger => (\r\n                <AdventureTrigger trigger={trigger} handleDeletion={() => delete_trigger(trigger)}/>\r\n              ))}\r\n            <ListGroup.Item>\r\n              <Button onClick={add_trigger}>Add Trigger</Button>\r\n            </ListGroup.Item>\r\n            </ListGroup>\r\n          </Row>\r\n          </Col>\r\n        </Container>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Button onClick={handleExport}>Export</Button>\r\n          <Button onClick={clickImport}>Import</Button>\r\n          <Form.File\r\n            onChange={handleImport}\r\n            accept=\".json\"\r\n            ref={ImportInput}\r\n            style ={{display:\"none\"}}/>\r\n        </Col>\r\n      </Row>\r\n    </Container>)\r\n  }","import './App.css';\r\nimport {RecoilRoot} from 'recoil'\r\nimport {AdventureEditor} from './Components/AdventureEditor'\r\n\r\n/*\r\nTODO:\r\nRandom value in effects support.\r\nBasic validation of loops/invalid node ids and such.\r\nStyling this to look good aaahhh!!!\r\n*/\r\n\r\nfunction App(){\r\n  return (\r\n    <RecoilRoot>\r\n      <AdventureEditor/>\r\n    </RecoilRoot>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}