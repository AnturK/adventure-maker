{"version":3,"sources":["Helpers.js","State.js","Components/EffectBuilder.js","Components/RequirementsBuilder.js","Components/AdventureChoice.js","Components/AdventureNode.js","signal_lost.png","Components/AdventureEditor.js","App.js","reportWebVitals.js","index.js"],"names":["replaceItemInArray","arr","oldVal","newValue","modifed","slice","indexOf","updateProp","obj","prop_name","new_value","global_ids","unique_id","category","NodeData","this","id","name","description","choices","image","image_raw","undefined","on_enter_effects","on_exit_effects","ChoiceData","exit_node","on_selection_effects","requirements","EffectData","effect_type","quality","value","ReqGroupData","group_type","ReqData","operator","AdventureState","atom","key","default","starting_node","nodes","required_traits","loot_types","scanner_band_modifiers","NodesSelector","selector","get","NodeSelector","selectorFamily","find","x","set","current","modified","Effect","props","handleChange","handleDelete","InputGroup","FormControl","as","effect","onChange","e","target","Prepend","Text","Append","Button","variant","onClick","EffectBuilder","handleEffectsChanged","handleEffectAdded","handleEffectDeleted","add_effect","effects","Card","Header","title","ListGroup","map","ListGroupItem","prop","RequirementsBuilder","handleRequirementsChanged","handleRequirementAdded","handleRequirementDeleted","add_req","req","ReqGroup","group","handleReqGroupChanged","handleReqGroupDeleted","SingleReq","requirement","handleReqChanged","handleReqDeleted","Item","ButtonGroup","deleteSubReq","deleted","new_reqs","filter","updateSubReq","old_req","changed_req","border","new_group","new_req","AdventureChoice","handleChoiceDeletion","handleChoiceChange","useRecoilValue","useState","choice","exitNodeSelectValue","setExitNodeSelectValue","Body","node","added","effect_prop","new_effect","old_effects","new_effects","addEffect","old","old_effect","changed_prop","changed_effect","updateEffects","removed","length","deleteEffect","old_reqs","AdventureNode","handleNodeDeletion","useRecoilState","setNode","current_image","raw_image","imageInput","useRef","image_name_text","CardGroup","Title","Img","src","Form","Control","readOnly","File","type","accept","ref","reader","FileReader","onload","uploaded_image","Image","width","height","modified_node","result","alert","readAsDataURL","files","style","display","click","FormGroup","Label","rows","placeholder","parent_id","new_choices","removeChoice","choice_property","new_choice","old_choice","updateChoice","addChoice","AdventureEditor","adventure","setAdventure","activeTab","setActiveTab","ImportInput","Container","fluid","Tab","activeKey","onSelect","Row","Col","Nav","Link","eventKey","modified_adventure","new_node","Content","Pane","changed_nodes","delete_node","data_object","adventure_name","blob","Blob","JSON","stringify","blob_url","URL","createObjectURL","window","open","parse","Object","readAsText","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.215996e0.chunk.js","sourcesContent":["//Helpers\r\nexport function replaceItemInArray(arr, oldVal, newValue) {\r\n    const modifed = arr.slice()\r\n    modifed[arr.indexOf(oldVal)] = newValue\r\n    return modifed\r\n}\r\n\r\nexport function updateProp(obj, prop_name, new_value) {\r\n    return { ...obj, [prop_name]: new_value }\r\n}","import { atom, selector, selectorFamily} from 'recoil'\r\nimport {replaceItemInArray} from './Helpers'\r\n\r\n/// Eugh\r\nexport const global_ids = {};\r\nexport function unique_id(category) {\r\n    category in global_ids ? global_ids[category] += 1 : global_ids[category] = 0\r\n    return global_ids[category]\r\n}\r\n\r\n//Data classes\r\nexport class AdventureData {\r\n    constructor() {\r\n        this.name = \"New adventure\"\r\n        this.starting_node = \"\"\r\n        this.nodes = []\r\n        this.required_traits = []\r\n        this.loot_types = []\r\n        this.scanner_band_modifiers = []\r\n    }\r\n}\r\n\r\nexport class NodeData {\r\n    constructor() {\r\n        this.id = unique_id(\"node\")\r\n        this.name = \"Node \" + this.id\r\n        this.description = \"Node description goes here\"\r\n        this.choices = []\r\n        this.image = \"default\"\r\n        this.image_raw = undefined\r\n        this.on_enter_effects = undefined\r\n        this.on_exit_effects = undefined\r\n    }\r\n}\r\n\r\nexport class ChoiceData {\r\n    constructor() {\r\n        this.id = unique_id(\"choice\")\r\n        this.name = \"New Choice\"\r\n        this.exit_node = \"FAIL\"\r\n        this.on_selection_effects = undefined\r\n        this.requirements = undefined\r\n    }\r\n}\r\n\r\nexport class EffectData {\r\n    constructor() {\r\n        this.id = unique_id(\"effect\")\r\n        this.effect_type = \"Add\"\r\n        this.quality = \"Quality\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport class ReqGroupData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.group_type = \"AND\"\r\n        this.requirements = []\r\n    }\r\n}\r\n\r\nexport class ReqData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.quality = \"Quality\"\r\n        this.operator = \"==\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport const AdventureState = atom({\r\n    key: \"adventure\",\r\n    default: new AdventureData(),\r\n})\r\n\r\nexport const NodesSelector = selector({\r\n    key: \"nodes\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.nodes\r\n    }\r\n})\r\n\r\nexport const NodeSelector = selectorFamily({\r\n    key: \"single_node\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.nodes.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, nodes: replaceItemInArray(current.nodes, current.nodes.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n","import { Button, Card, ListGroup, FormControl, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { EffectData } from './../State'\r\n\r\nfunction Effect(props) {\r\n    const handleChange = props.handleChange\r\n    const handleDelete = props.handleDelete\r\n\r\n    return (\r\n        <InputGroup>\r\n            <FormControl as=\"select\" value={props.effect.effect_type} onChange={e => handleChange(\"effect_type\", e.target.value)}>\r\n                <option>add</option>\r\n                <option>remove</option>\r\n                <option>set</option>\r\n            </FormControl>\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Quality</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.quality} onChange={e => handleChange(\"quality\", e.target.value)} />\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Value</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.value} onChange={e => handleChange(\"value\", e.target.value)} />\r\n            <InputGroup.Append>\r\n                <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\r\n            </InputGroup.Append>\r\n        </InputGroup>)\r\n}\r\n\r\nexport function EffectBuilder(props) {\r\n    const handleEffectsChanged = props.handleEffectsChanged\r\n    const handleEffectAdded = props.handleEffectAdded\r\n    const handleEffectDeleted = props.handleEffectDeleted\r\n    function add_effect() {\r\n        handleEffectAdded(new EffectData())\r\n    }\r\n\r\n    if (!props.effects)\r\n        return (\r\n            <InputGroup>\r\n                <InputGroup.Prepend>\r\n                    <InputGroup.Text>\r\n                        {props.title}\r\n                    </InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                    <Button onClick={add_effect}>Create Effect</Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        )\r\n    return (\r\n        <>\r\n            <Card.Header>{props.title}</Card.Header>\r\n            <ListGroup>\r\n                {props.effects.map(effect => (\r\n                    <ListGroupItem key={effect.id}>\r\n                        <Effect\r\n                            effect={effect}\r\n                            handleChange={(prop, value) => handleEffectsChanged(effect, prop, value)}\r\n                            handleDelete={(prop, value) => handleEffectDeleted(effect, prop, value)} />\r\n                    </ListGroupItem>))}\r\n                <ListGroupItem>\r\n                    <Button onClick={add_effect}>Add New Effect</Button>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n        </>)\r\n}","import {ReqGroupData,ReqData} from '../State'\r\nimport {InputGroup,Button,Card,ListGroup,FormControl,ButtonGroup} from 'react-bootstrap'\r\nimport { useState } from 'react'\r\n\r\nexport function RequirementsBuilder(props) {\r\n    const handleRequirementsChanged = props.handleRequirementsChanged\r\n    const handleRequirementAdded = props.handleRequirementAdded\r\n    const handleRequirementDeleted = props.handleRequirementDeleted\r\n  \r\n    function add_req_group() {\r\n      handleRequirementAdded(new ReqGroupData())\r\n    }\r\n  \r\n    function add_req() {\r\n      handleRequirementAdded(new ReqData())\r\n    }\r\n  \r\n    if (!props.requirements) {\r\n      return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>\r\n            {props.title}\r\n          </InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <InputGroup.Append>\r\n          <Button onClick={add_req}>Add Requirements</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>)\r\n    }\r\n    return (\r\n      <>\r\n      <Card.Header>{props.title}</Card.Header>\r\n      <ListGroup>\r\n        {props.requirements.map(req => {\r\n          return req.requirements ? (\r\n            <ReqGroup\r\n              key={req.id} \r\n              group={req}\r\n              handleReqGroupChanged={(prop_name,new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqGroupDeleted={() => handleRequirementDeleted(req)}\r\n              />) :\r\n            (<SingleReq \r\n              key={req.id}\r\n              requirement={req}\r\n              handleReqChanged={(prop_name, new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqDeleted={() => handleRequirementDeleted(req)}\r\n            />)\r\n        })}\r\n        <ListGroup.Item>\r\n          <ButtonGroup>\r\n            <Button onClick={add_req_group}>Add Req Group</Button>\r\n            <Button onClick={add_req}>Add Single Req</Button>\r\n          </ButtonGroup>\r\n        </ListGroup.Item>\r\n      </ListGroup></>)\r\n  }\r\n\r\n\r\n  \r\n  function SingleReq(props) {\r\n    const handleReqDeleted = props.handleReqDeleted\r\n    const handleReqChanged = props.handleReqChanged\r\n    return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>Quality</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <FormControl value={props.requirement.quality} onChange={e => handleReqChanged(\"quality\", e.target.value)} />\r\n        <FormControl as=\"select\" value={props.requirement.operator} onChange={e => handleReqChanged(\"operator\", e.target.value)}>\r\n          <option>==</option>\r\n          <option>!=</option>\r\n          <option>&gt;</option>\r\n          <option>&lt;</option>\r\n          <option>&gt;=</option>\r\n          <option>&lt;=</option>\r\n        </FormControl>\r\n        <FormControl value={props.requirement.value} onChange={e => handleReqChanged(\"value\", e.target.value)}/>\r\n        <InputGroup.Append>\r\n          <Button variant=\"danger\" onClick={() => handleReqDeleted(props.requirement)}>Delete</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    )\r\n  }\r\n  \r\n  function ReqGroup(props) {\r\n    const handleReqGroupDeleted = props.handleReqGroupDeleted\r\n    const handleReqGroupChanged = props.handleReqGroupChanged\r\n\r\n    const addSubGroup = () => {\r\n      const new_group = new ReqGroupData()\r\n      const new_reqs = [...props.group.requirements, new_group]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const addSubReq = () => {\r\n      const new_req = new ReqData()\r\n      const new_reqs = [...props.group.requirements, new_req]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const deleteSubReq = (deleted) =>{\r\n      const new_reqs = props.group.requirements.filter(x => x !== deleted)\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const updateSubReq = (old_req,prop,new_value) =>{\r\n      const changed_req = {...old_req, [prop]:new_value}\r\n      const new_reqs = props.group.requirements.slice()\r\n      new_reqs[props.group.requirements.indexOf(old_req)] = changed_req\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    return (\r\n      <Card border=\"dark\">\r\n        <Card.Header>\r\n          <InputGroup>\r\n            <FormControl as=\"select\" value={props.group.group_type} onChange={e => handleReqGroupChanged(\"group_type\",e.target.value)}> \r\n              <option>AND</option>\r\n              <option>OR</option>\r\n            </FormControl>\r\n            <InputGroup.Text>Group</InputGroup.Text>\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={() => handleReqGroupDeleted(props.group)} >Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </Card.Header>\r\n        <ListGroup>\r\n          <ListGroup.Item>\r\n            {props.group.requirements.map(req =>{\r\n              return req.requirements ? \r\n                (<ReqGroup\r\n                  key={req.id}\r\n                  group={req}\r\n                  handleReqGroupDeleted={deleteSubReq}\r\n                  handleReqGroupChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />) : \r\n                (<SingleReq\r\n                  key={req.id} \r\n                  requirement={req}\r\n                  handleReqDeleted={deleteSubReq}\r\n                  handleReqChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />)\r\n            })}\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <ButtonGroup>\r\n              <Button onClick={addSubGroup}>Add Req Group</Button>\r\n              <Button onClick={addSubReq}>Add Single Req</Button>\r\n            </ButtonGroup>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n      </Card>\r\n    )\r\n  }","import React,{useState} from 'react'\r\nimport {Button, Card, InputGroup, FormControl } from 'react-bootstrap'\r\nimport {useRecoilValue} from 'recoil'\r\nimport {NodesSelector} from './../State'\r\nimport {EffectBuilder} from './EffectBuilder'\r\nimport {RequirementsBuilder} from './RequirementsBuilder'\r\n\r\nexport function AdventureChoice(props) {\r\n    const handleChoiceDeletion = props.handleChoiceDeletion\r\n    const handleChoiceChange = props.handleChoiceChange\r\n  \r\n  \r\n    const addEffect = (effect_prop, new_effect) => {\r\n      const old_effects = props.choice[effect_prop]\r\n      const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n      const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n      const new_effects = props.choice[effect_prop].slice()\r\n      new_effects[props.choice[effect_prop].indexOf(old_effect)] = changed_effect\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const deleteEffect = (effect_prop, removed) => {\r\n      const new_effects = props.choice[effect_prop].filter(x => x !== removed)\r\n      handleChoiceChange(effect_prop, new_effects.length ? new_effects : undefined)\r\n    }\r\n  \r\n  \r\n    const addRequirement = added => {\r\n      const old_reqs = props.choice.requirements\r\n      const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const deleteRequirement = removed => {\r\n      const new_reqs = props.choice.requirements.filter(x => x !== removed)\r\n      handleChoiceChange(\"requirements\", new_reqs.length ? new_reqs : undefined)\r\n    }\r\n  \r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n      const changed_req = { ...old_req, [changed_prop]: new_value }\r\n      const new_reqs = props.choice.requirements.slice()\r\n      new_reqs[props.choice.requirements.indexOf(old_req)] = changed_req\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const nodes = useRecoilValue(NodesSelector)\r\n    const [exitNodeSelectValue, setExitNodeSelectValue] = useState(props.choice.exit_node);\r\n  \r\n    const changeExitNode = (e) => {\r\n      setExitNodeSelectValue(e.target.value)\r\n      handleChoiceChange(\"exit_node\", e.target.value)\r\n    }\r\n  \r\n  \r\n    return (\r\n      <Card>\r\n        <Card.Body>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Choice</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.choice.name} onChange={(e) => handleChoiceChange(\"name\", e.target.value)} />\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={handleChoiceDeletion}>Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Exit Node</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl as=\"select\" value={exitNodeSelectValue} onChange={changeExitNode}>\r\n              <option>FAIL</option>\r\n              <option>WIN</option>\r\n              {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n            </FormControl>\r\n          </InputGroup>\r\n          <EffectBuilder\r\n              title=\"Selection Effects\"\r\n              effects={props.choice.on_selection_effects}\r\n              handleEffectAdded={added => addEffect(\"on_selection_effects\", added)}\r\n              handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_selection_effects\", old, prop, new_value)}\r\n              handleEffectDeleted={deleted => deleteEffect(\"on_selection_effects\", deleted)}/>\r\n          <RequirementsBuilder\r\n            title=\"Requirements\"\r\n            requirements={props.choice.requirements}\r\n            handleRequirementAdded={addRequirement}\r\n            handleRequirementDeleted={deleteRequirement}\r\n            handleRequirementsChanged={updateRequirements}\r\n          />\r\n        </Card.Body>\r\n      </Card>)\r\n  }","import React, { useRef } from 'react';\r\nimport { Button, Col, Container, Row, Card,CardGroup, ListGroup, FormControl, FormGroup, Form, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport default_image from '../signal_lost.png'\r\nimport { updateProp } from '../Helpers'\r\nimport { NodeSelector, ChoiceData } from '../State'\r\nimport { AdventureChoice } from './AdventureChoice'\r\nimport { EffectBuilder } from './EffectBuilder'\r\n\r\n\r\nexport function AdventureNode(props) {\r\n    const handleNodeDeletion = props.handleNodeDeletion\r\n\r\n    const [node, setNode] = useRecoilState(NodeSelector(props.node.id))\r\n\r\n    const update_node_name = (e) => {\r\n        const modified_node = updateProp(node, \"name\", e.target.value)\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const addChoice = (new_choice) => {\r\n        const new_choices = [...props.node.choices, new_choice]\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const removeChoice = (removed) => {\r\n        const new_choices = props.node.choices.filter(x => x !== removed)\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n    const updateChoice = (old_choice, new_choice) => {\r\n        const new_choices = props.node.choices.slice()\r\n        new_choices[props.node.choices.indexOf(old_choice)] = new_choice\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.node[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.node[effect_prop].slice()\r\n        new_effects[props.node[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.node[effect_prop].filter(x => x !== removed)\r\n        setNode(updateProp(node, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const current_image = node.raw_image ? node.raw_image : default_image\r\n    const imageInput = useRef()\r\n    const try_uploading_image = () => {\r\n        imageInput.current.click() //god why\r\n    }\r\n\r\n    const setUploadedImage = (e) => {\r\n        var reader = new FileReader()\r\n        reader.onload = (e) => {\r\n            var uploaded_image = new Image()\r\n            uploaded_image.onload = () =>{\r\n                if(uploaded_image.width !== 200 || uploaded_image.height !== 100){\r\n                    alert(`Adventure images need to be be 200x100 pngs.`)\r\n                    return\r\n                }\r\n                const modified_node = {...node,\r\n                    raw_image:e.target.result,\r\n                    image:null\r\n                }\r\n                setNode(modified_node)\r\n            }\r\n            uploaded_image.src = e.target.result\r\n        }\r\n        reader.readAsDataURL(e.target.files[0])\r\n    }\r\n\r\n    const reset_image = (e) => {\r\n        const modified_node = {...node,\r\n            raw_image:undefined,\r\n            image:\"default\"\r\n        }\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const update_image = e => {\r\n        setNode(updateProp(node,\"image\",e.target.value))\r\n    }\r\n\r\n    const image_name_text = node.raw_image ? \"custom image data\" : node.image\r\n    return (\r\n        <CardGroup>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Title>{node.name} <Button variant=\"danger\" onClick={handleNodeDeletion}>Delete</Button></Card.Title>\r\n                            <Card.Img variant=\"top\" src={current_image}  />\r\n                            <InputGroup>\r\n                                <InputGroup.Prepend>\r\n                                    <InputGroup.Text>Image</InputGroup.Text>\r\n                                </InputGroup.Prepend>\r\n                                <Form.Control value={image_name_text} readOnly={node.raw_image !== undefined} onChange={update_image}/>\r\n                                <Form.File type='file' accept=\"image/png\" ref={imageInput} onChange={setUploadedImage} style={{display:\"none\"}}/>\r\n                                <InputGroup.Append>\r\n                                    <Button onClick={try_uploading_image}>Custom</Button>\r\n                                    <Button onClick={reset_image}>Reset</Button>\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Node ID</Form.Label>\r\n                                <FormControl value={node.name} onChange={update_node_name} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Description</Form.Label>\r\n                                <FormControl as=\"textarea\" rows={5} placeholder=\"Describe whatever here.\" value={node.description} onChange={(e) => setNode(updateProp(node, \"description\", e.target.value))} />\r\n                            </FormGroup>\r\n                            <EffectBuilder\r\n                                title=\"On Enter Effects\"\r\n                                effects={node.on_enter_effects}\r\n                                handleEffectAdded={added => addEffect(\"on_enter_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_enter_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_enter_effects\", deleted)} />\r\n                            <EffectBuilder\r\n                                title=\"On Exit Effects\"\r\n                                effects={node.on_exit_effects}\r\n                                parent_id={node.id}\r\n                                handleEffectAdded={added => addEffect(\"on_exit_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_exit_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_exit_effects\", deleted)} />\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Header>Choices</Card.Header>\r\n                            <ListGroup>\r\n                                {node.choices.map(choice => (\r\n                                    <ListGroup.Item key={choice.id}>\r\n                                        <AdventureChoice\r\n                                            choice={choice}\r\n                                            handleChoiceDeletion={() => removeChoice(choice)}\r\n                                            handleChoiceChange={(choice_property, new_value) => {\r\n                                                const new_choice = { ...choice, [choice_property]: new_value }\r\n                                                updateChoice(choice, new_choice)\r\n                                            }}\r\n                                        />\r\n                                    </ListGroup.Item>))}\r\n                                <ListGroupItem><Button onClick={() => addChoice(new ChoiceData())}>Add Choice</Button></ListGroupItem>\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n            </CardGroup>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC\"","import React,{useRef, useState} from 'react'\r\nimport { Button, Col, Container, Row, Tab, Nav, FormControl, FormGroup, Form, } from 'react-bootstrap'\r\nimport {useRecoilState} from 'recoil'\r\nimport {AdventureState,NodesSelector,NodeData, unique_id} from './../State'\r\nimport {updateProp} from './../Helpers'\r\nimport {AdventureNode} from './AdventureNode'\r\n\r\nexport function AdventureEditor() {\r\n    const [adventure,setAdventure] = useRecoilState(AdventureState);\r\n    const [nodes] = useRecoilState(NodesSelector)\r\n\r\n    const [activeTab,setActiveTab] = useState(\"\")\r\n   \r\n    const add_node = () => {\r\n      const modified_adventure = {...adventure,\r\n        nodes:[...nodes,new NodeData()]\r\n      }\r\n      const new_node = modified_adventure.nodes[0]\r\n      if(!modified_adventure.starting_node)\r\n      {\r\n        modified_adventure.starting_node = new_node.name\r\n        setAdventure(modified_adventure)\r\n        setActiveTab(new_node.id)\r\n      }\r\n      else{\r\n        setAdventure(modified_adventure)\r\n      }\r\n\r\n    }\r\n    const delete_node = (node) => {\r\n      const changed_nodes = nodes.filter(x => x !== node)\r\n      if(changed_nodes.length)\r\n        setActiveTab(changed_nodes[0].id)\r\n      setAdventure(updateProp(adventure,\"nodes\",changed_nodes))\r\n      \r\n    }\r\n    \r\n    const handleExport = () => {\r\n      const data_object = {\r\n        adventure_name: adventure.name,\r\n        starting_node: adventure.starting_node,\r\n        nodes: nodes\r\n      }\r\n      //Internal stuff, byond doesn't care about this\r\n      const remove_ids = (key, value) => {\r\n        if (key === \"id\")\r\n          return undefined\r\n        return value;\r\n      }\r\n      const blob = new Blob([JSON.stringify(data_object, remove_ids)], { type: 'application/json' })\r\n      const blob_url = URL.createObjectURL(blob)\r\n      window.open(blob_url)\r\n    }\r\n  \r\n    const handleImport = e => {\r\n      var reader = new FileReader()\r\n      reader.onload = (e) =>{\r\n        const generate_ids = (key,value) => {\r\n          if(value === Object(value)) //Thanks StackOverflow\r\n          {\r\n            value.id = unique_id(\"import\")\r\n          }\r\n          return value\r\n        }\r\n        const result = JSON.parse(e.target.result,generate_ids)\r\n  \r\n        const modified_adventure = {...adventure,\r\n          name:result.adventure_name,\r\n          starting_node:result.starting_node,\r\n          nodes:result.nodes\r\n        }\r\n        setAdventure(modified_adventure)\r\n      }\r\n      reader.readAsText(e.target.files[0])\r\n    }\r\n\r\n    const ImportInput = useRef()\r\n    const clickImport = () => {\r\n      ImportInput.current.click()\r\n    }\r\n  \r\n    return (\r\n    <Container fluid=\"xl\">\r\n      <Form>\r\n        <FormGroup>\r\n          <Form.Label>Adventure name</Form.Label>\r\n          <FormControl placeholder=\"New adventure\" value={adventure.name} onChange={(e) => setAdventure(updateProp(adventure,\"name\",e.target.value))} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Form.Label>Starting node</Form.Label>\r\n          <FormControl as=\"select\" value={adventure.starting_node} onChange={(e) => setAdventure(updateProp(adventure,\"starting_node\",e.target.value))}>\r\n            {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n          </FormControl>\r\n        </FormGroup>\r\n      </Form>\r\n      <Tab.Container id=\"nodes\" activeKey={activeTab} onSelect={e => setActiveTab(e)}>\r\n        <Row>\r\n          <Col>\r\n            <Nav variant=\"tabs\">\r\n              {nodes.map(node => (<Nav.Item key={node.id}><Nav.Link eventKey={node.id}>{node.name}</Nav.Link></Nav.Item>))}\r\n              <Nav.Item>\r\n                <Nav.Link onClick={add_node}>Add Node</Nav.Link>\r\n              </Nav.Item>\r\n            </Nav>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <Tab.Content>\r\n                {nodes.map(node => (\r\n                  <Tab.Pane eventKey={node.id} key={node.id}>\r\n                    <AdventureNode \r\n                      node={node}\r\n                      handleNodeDeletion={() => delete_node(node)}\r\n                      />\r\n                  </Tab.Pane>))}\r\n              </Tab.Content>\r\n          </Col>\r\n        </Row>\r\n      </Tab.Container>\r\n      <Row>\r\n        <Col>\r\n          <Button onClick={handleExport}>Export</Button>\r\n          <Button onClick={clickImport}>Import</Button>\r\n          <Form.File\r\n            onChange={handleImport}\r\n            accept=\".json\"\r\n            ref={ImportInput}\r\n            style ={{display:\"none\"}}/>\r\n        </Col>\r\n      </Row>\r\n    </Container>)\r\n  }","import './App.css';\r\nimport {RecoilRoot} from 'recoil'\r\nimport {AdventureEditor} from './Components/AdventureEditor'\r\n\r\n/*\r\nTODO:\r\nRandom value in effects support.\r\nBasic validation of loops/invalid node ids and such.\r\nStyling this to look good aaahhh!!!\r\n*/\r\n\r\nfunction App(){\r\n  return (\r\n    <RecoilRoot>\r\n      <AdventureEditor/>\r\n    </RecoilRoot>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}