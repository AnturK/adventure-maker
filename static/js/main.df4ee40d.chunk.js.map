{"version":3,"sources":["Helpers.js","State.js","Components/EffectBuilder.js","Components/RequirementsBuilder.js","ExternalDefines.js","images/default.png","images/grue.png","images/signal_lost.png","images/trade.png","Components/Utility.js","Components/AdventureChoice.js","Components/AdventureNode.js","Components/AdventureTrigger.js","Components/AdventurePlayer.js","Components/AdventureEditor.js","App.js","reportWebVitals.js","index.js"],"names":["replaceItemInArray","arr","oldVal","newValue","modifed","slice","indexOf","updateProp","obj","prop_name","new_value","convertNumberValue","value","as_number","Number","isFinite","isNaN","global_ids","unique_id","category","NodeData","this","id","name","description","choices","image","image_raw","undefined","on_enter_effects","on_exit_effects","TriggerData","target_node","on_trigger_effects","ChoiceData","key","exit_node","on_selection_effects","requirements","delay","delay_message","EffectData","effect_type","quality","ReqGroupData","group_type","ReqData","operator","AdventureState","atom","default","starting_node","nodes","triggers","required_site_traits","loot_types","band_modifiers","starting_qualities","NodesSelector","selector","get","NodeSelector","selectorFamily","find","x","set","current","modified","TriggersSelector","TriggerSelector","Effect","props","handleChange","handleDelete","value_type","effect","Object","InputGroup","FormControl","as","onChange","e","target","Prepend","Text","low","high","value_type_controls","Append","Button","onClick","allowed_types","current_index","new_type","length","defaultForValueType","variant","EffectBuilder","handleEffectsChanged","handleEffectAdded","handleEffectDeleted","add_effect","effects","Card","Header","title","ListGroup","map","ListGroupItem","prop","RequirementsBuilder","handleRequirementsChanged","handleRequirementAdded","handleRequirementDeleted","add_req","req","ReqGroup","group","handleReqGroupChanged","handleReqGroupDeleted","SingleReq","requirement","handleReqChanged","handleReqDeleted","Item","ButtonGroup","deleteSubReq","deleted","new_reqs","filter","updateSubReq","old_req","changed_req","border","new_group","new_req","special_nodes","site_traits","scan_bands","preset_images","grue","signal_lost","trader","BasicCollapsible","useState","startCollapsed","sectionCollapsed","setSectionCollapsed","Container","Row","Col","className","children","NodeSelectionDropdown","allowNone","allowCustom","rest","useRecoilState","node","KeyValueList","presetKeys","store","setStore","newKey","setNewKey","setNewValue","store_keys","keys","Table","size","newstore","remove_key","pk","SimpleList","presetValues","unique","FormGroup","remove_value","AdventureChoice","handleChoiceDeletion","handleChoiceChange","choice","exitNodeSelectValue","setExitNodeSelectValue","Body","added","effect_prop","new_effect","old_effects","new_effects","addEffect","old","old_effect","changed_prop","changed_effect","updateEffects","removed","deleteEffect","old_reqs","AdventureNode","handleNodeDeletion","setNode","current_image","raw_image","imageInput","useRef","image_name_text","CardGroup","Title","Img","src","Form","Control","readOnly","k","File","type","accept","ref","reader","FileReader","onload","uploaded_image","Image","width","height","modified_node","result","alert","readAsDataURL","files","style","display","click","Label","rows","placeholder","parent_id","new_choices","removeChoice","choice_property","new_choice","old_choice","updateChoice","addChoice","AdventureTrigger","handleDeletion","trigger","setTrigger","AdventurePlayer","adventure","currentNode","setCurrentNode","setQualities","Alert","selectChoice","AdventureEditor","setAdventure","activeTab","setActiveTab","draggedItem","setDraggedItem","ImportInput","openTab","toString","getDefaultTab","startingNode","getDefaultStartingNode","playing","setPlaying","toggle_playing","Modal","show","onHide","data_object","adventure_name","loot_categories","scan_band_mods","blob","Blob","JSON","stringify","blob_url","URL","createObjectURL","window","open","parse","modified_adventure","readAsText","Tab","activeKey","onSelect","Nav","draggable","onDragEnd","onDragStart","start_dragging","onDrop","index_a","index_b","modified_nodes","switch_node","onDragOver","preventDefault","validate_drop","Link","eventKey","Content","Pane","changed_nodes","delete_node","xl","changed_triggers","delete_trigger","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.df4ee40d.chunk.js","sourcesContent":["//Helpers\r\nexport function replaceItemInArray(arr, oldVal, newValue) {\r\n    const modifed = arr.slice()\r\n    modifed[arr.indexOf(oldVal)] = newValue\r\n    return modifed\r\n}\r\n\r\nexport function updateProp(obj, prop_name, new_value) {\r\n    return { ...obj, [prop_name]: new_value }\r\n}\r\n\r\nexport function convertNumberValue(value){\r\n    const as_number = Number(value)\r\n    if(Number.isFinite(as_number) && !Number.isNaN(as_number)){\r\n      return as_number\r\n    }\r\n    return value;\r\n  }","import { atom, selector, selectorFamily} from 'recoil'\r\nimport {replaceItemInArray} from './Helpers'\r\n\r\n/// Eugh\r\nexport const global_ids = {};\r\nexport function unique_id(category) {\r\n    category in global_ids ? global_ids[category] += 1 : global_ids[category] = 0\r\n    return `${category} ${global_ids[category]}`\r\n}\r\n\r\n//Data classes\r\nexport class AdventureData {\r\n    constructor() {\r\n        this.name = \"New adventure\"\r\n        this.starting_node = \"\"\r\n        this.nodes = []\r\n        this.triggers = []\r\n        this.required_site_traits = []\r\n        this.loot_types = []\r\n        this.band_modifiers = {}\r\n        this.starting_qualities = {}\r\n    }\r\n}\r\n\r\nexport class NodeData {\r\n    constructor() {\r\n        this.id = unique_id(\"Node\")\r\n        this.name = this.id\r\n        this.description = \"Node description goes here\"\r\n        this.choices = []\r\n        this.image = \"default\"\r\n        this.image_raw = undefined\r\n        this.on_enter_effects = undefined\r\n        this.on_exit_effects = undefined\r\n    }\r\n}\r\n\r\nexport class TriggerData{\r\n    constructor(){\r\n        this.id = unique_id(\"trigger\")\r\n        this.name = \"Trigger\"\r\n        this.target_node = undefined\r\n        this.on_trigger_effects = undefined\r\n    }\r\n}\r\n\r\nexport class ChoiceData {\r\n    constructor() {\r\n        this.id = unique_id(\"choice\")\r\n        this.key = this.id\r\n        this.name = \"New Choice\"\r\n        this.exit_node = \"FAIL\"\r\n        this.on_selection_effects = undefined\r\n        this.requirements = undefined\r\n        this.delay = 0\r\n        this.delay_message = undefined\r\n    }\r\n}\r\n\r\nexport class EffectData {\r\n    constructor() {\r\n        this.id = unique_id(\"effect\")\r\n        this.effect_type = \"Add\"\r\n        this.quality = \"Quality\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport class ReqGroupData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.group_type = \"AND\"\r\n        this.requirements = []\r\n    }\r\n}\r\n\r\nexport class ReqData {\r\n    constructor() {\r\n        this.id = unique_id(\"req\")\r\n        this.quality = \"Quality\"\r\n        this.operator = \"==\"\r\n        this.value = 1\r\n    }\r\n}\r\n\r\nexport const AdventureState = atom({\r\n    key: \"adventure\",\r\n    default: new AdventureData(),\r\n})\r\n\r\nexport const NodesSelector = selector({\r\n    key: \"nodes\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.nodes\r\n    }\r\n})\r\n\r\nexport const NodeSelector = selectorFamily({\r\n    key: \"single_node\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.nodes.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, nodes: replaceItemInArray(current.nodes, current.nodes.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n\r\nexport const TriggersSelector = selector({\r\n    key: \"triggers\",\r\n    get: ({ get }) => {\r\n        const adventure = get(AdventureState)\r\n        return adventure.triggers\r\n    }\r\n})\r\n\r\nexport const TriggerSelector = selectorFamily({\r\n    key: \"single_trigger\",\r\n    get: (id) => ({ get }) => {\r\n        const adventure = get(AdventureState);\r\n        return adventure.triggers.find(x => x.id === id)\r\n    },\r\n    set: (id) => ({ set, get }, newValue) => {\r\n        const current = get(AdventureState)\r\n        const modified = { ...current, triggers: replaceItemInArray(current.triggers, current.triggers.find(x => x.id === id), newValue) }\r\n        set(AdventureState, modified)\r\n    }\r\n})\r\n","import { Button, Card, ListGroup, FormControl, ListGroupItem, InputGroup } from 'react-bootstrap'\r\nimport { EffectData } from './../State'\r\nimport { convertNumberValue} from '../Helpers'\r\n\r\nfunction Effect(props) {\r\n    const handleChange = props.handleChange\r\n    const handleDelete = props.handleDelete\r\n    const value_type = props.effect.value === Object(props.effect.value) ? props.effect.value[\"value_type\"] : \"raw\"\r\n\r\n    const defaultForValueType = value_type => {\r\n        switch(value_type){\r\n            case \"raw\":\r\n                return 0\r\n            case \"random\":\r\n               return { \"value_type\": \"random\", \"low\": 0, \"high\": 0 }\r\n            default:\r\n                return 0\r\n        }\r\n    }\r\n\r\n    const toggleSpecialValueType = e => {\r\n        const allowed_types = [\"raw\",\"random\"]\r\n        const current_index = allowed_types.indexOf(value_type)\r\n        const new_type = allowed_types[(current_index+1)%allowed_types.length]\r\n        handleChange(\"value\",defaultForValueType(new_type))\r\n    }\r\n\r\n    const value_type_controls = value_type => {\r\n        switch (value_type) {\r\n            case \"random\":\r\n                return (\r\n                    <>\r\n                        <InputGroup.Text>Random</InputGroup.Text>\r\n                        <FormControl value={props.effect.value.low} onChange={e => handleChange(\"value\", {...props.effect.value,low:convertNumberValue(e.target.value)})} />\r\n                        <InputGroup.Text>To</InputGroup.Text>\r\n                        <FormControl value={props.effect.value.high} onChange={e => handleChange(\"value\",{...props.effect.value,high:convertNumberValue(e.target.value)})} />\r\n                    </>\r\n                )\r\n            case \"raw\":\r\n                return (<FormControl value={props.effect.value} onChange={e => handleChange(\"value\", convertNumberValue(e.target.value))} />)\r\n            default:\r\n                return (<InputGroup.Text>Unsupported</InputGroup.Text>)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <InputGroup>\r\n            <FormControl as=\"select\" value={props.effect.effect_type} onChange={e => handleChange(\"effect_type\", e.target.value)}>\r\n                <option>add</option>\r\n                <option>remove</option>\r\n                <option>set</option>\r\n            </FormControl>\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Quality</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.effect.quality} onChange={e => handleChange(\"quality\", e.target.value)} />\r\n            <InputGroup.Prepend>\r\n                <InputGroup.Text>Value</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            {value_type_controls(value_type)}\r\n\r\n            <InputGroup.Append>\r\n                <Button onClick={toggleSpecialValueType}>*</Button>\r\n                <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\r\n            </InputGroup.Append>\r\n        </InputGroup>)\r\n}\r\n\r\nexport function EffectBuilder(props) {\r\n    const handleEffectsChanged = props.handleEffectsChanged\r\n    const handleEffectAdded = props.handleEffectAdded\r\n    const handleEffectDeleted = props.handleEffectDeleted\r\n    function add_effect() {\r\n        handleEffectAdded(new EffectData())\r\n    }\r\n\r\n    if (!props.effects)\r\n        return (\r\n            <InputGroup>\r\n                <InputGroup.Prepend>\r\n                    <InputGroup.Text>\r\n                        {props.title}\r\n                    </InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                    <Button onClick={add_effect}>Create Effect</Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        )\r\n    return (\r\n        <>\r\n            <Card.Header>{props.title}</Card.Header>\r\n            <ListGroup>\r\n                {props.effects.map(effect => (\r\n                    <ListGroupItem key={effect.id}>\r\n                        <Effect\r\n                            effect={effect}\r\n                            handleChange={(prop, value) => handleEffectsChanged(effect, prop, value)}\r\n                            handleDelete={(prop, value) => handleEffectDeleted(effect, prop, value)} />\r\n                    </ListGroupItem>))}\r\n                <ListGroupItem>\r\n                    <Button onClick={add_effect}>Add New Effect</Button>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n        </>)\r\n}","import {ReqGroupData,ReqData} from '../State'\r\nimport {InputGroup,Button,Card,ListGroup,FormControl,ButtonGroup} from 'react-bootstrap'\r\nimport {convertNumberValue} from '../Helpers'\r\n\r\nexport function RequirementsBuilder(props) {\r\n    const handleRequirementsChanged = props.handleRequirementsChanged\r\n    const handleRequirementAdded = props.handleRequirementAdded\r\n    const handleRequirementDeleted = props.handleRequirementDeleted\r\n  \r\n    function add_req_group() {\r\n      handleRequirementAdded(new ReqGroupData())\r\n    }\r\n  \r\n    function add_req() {\r\n      handleRequirementAdded(new ReqData())\r\n    }\r\n  \r\n    if (!props.requirements) {\r\n      return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>\r\n            {props.title}\r\n          </InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <InputGroup.Append>\r\n          <Button onClick={add_req}>Add Requirements</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>)\r\n    }\r\n    return (\r\n      <>\r\n      <Card.Header>{props.title}</Card.Header>\r\n      <ListGroup>\r\n        {props.requirements.map(req => {\r\n          return req.requirements ? (\r\n            <ReqGroup\r\n              key={req.id} \r\n              group={req}\r\n              handleReqGroupChanged={(prop_name,new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqGroupDeleted={() => handleRequirementDeleted(req)}\r\n              />) :\r\n            (<SingleReq \r\n              key={req.id}\r\n              requirement={req}\r\n              handleReqChanged={(prop_name, new_value) => handleRequirementsChanged(req, prop_name, new_value)}\r\n              handleReqDeleted={() => handleRequirementDeleted(req)}\r\n            />)\r\n        })}\r\n        <ListGroup.Item>\r\n          <ButtonGroup>\r\n            <Button onClick={add_req_group}>Add Req Group</Button>\r\n            <Button onClick={add_req}>Add Single Req</Button>\r\n          </ButtonGroup>\r\n        </ListGroup.Item>\r\n      </ListGroup></>)\r\n  }\r\n\r\n\r\n  \r\n  function SingleReq(props) {\r\n    const handleReqDeleted = props.handleReqDeleted\r\n    const handleReqChanged = props.handleReqChanged\r\n    return (\r\n      <InputGroup>\r\n        <InputGroup.Prepend>\r\n          <InputGroup.Text>Quality</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <FormControl value={props.requirement.quality} onChange={e => handleReqChanged(\"quality\", e.target.value)} />\r\n        <FormControl as=\"select\" value={props.requirement.operator} onChange={e => handleReqChanged(\"operator\", e.target.value)}>\r\n          <option>==</option>\r\n          <option>!=</option>\r\n          <option>&gt;</option>\r\n          <option>&lt;</option>\r\n          <option>&gt;=</option>\r\n          <option>&lt;=</option>\r\n        </FormControl>\r\n        <FormControl value={props.requirement.value} onChange={e => handleReqChanged(\"value\", convertNumberValue(e.target.value))}/>\r\n        <InputGroup.Append>\r\n          <Button variant=\"danger\" onClick={() => handleReqDeleted(props.requirement)}>Delete</Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    )\r\n  }\r\n  \r\n  function ReqGroup(props) {\r\n    const handleReqGroupDeleted = props.handleReqGroupDeleted\r\n    const handleReqGroupChanged = props.handleReqGroupChanged\r\n\r\n    const addSubGroup = () => {\r\n      const new_group = new ReqGroupData()\r\n      const new_reqs = [...props.group.requirements, new_group]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const addSubReq = () => {\r\n      const new_req = new ReqData()\r\n      const new_reqs = [...props.group.requirements, new_req]\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const deleteSubReq = (deleted) =>{\r\n      const new_reqs = props.group.requirements.filter(x => x !== deleted)\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    const updateSubReq = (old_req,prop,new_value) =>{\r\n      const changed_req = {...old_req, [prop]:new_value}\r\n      const new_reqs = props.group.requirements.slice()\r\n      new_reqs[props.group.requirements.indexOf(old_req)] = changed_req\r\n      handleReqGroupChanged(\"requirements\",new_reqs)\r\n    }\r\n  \r\n    return (\r\n      <Card border=\"dark\">\r\n        <Card.Header>\r\n          <InputGroup>\r\n            <FormControl as=\"select\" value={props.group.group_type} onChange={e => handleReqGroupChanged(\"group_type\",e.target.value)}> \r\n              <option>AND</option>\r\n              <option>OR</option>\r\n            </FormControl>\r\n            <InputGroup.Text>Group</InputGroup.Text>\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={() => handleReqGroupDeleted(props.group)} >Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </Card.Header>\r\n        <ListGroup>\r\n          <ListGroup.Item>\r\n            {props.group.requirements.map(req =>{\r\n              return req.requirements ? \r\n                (<ReqGroup\r\n                  key={req.id}\r\n                  group={req}\r\n                  handleReqGroupDeleted={deleteSubReq}\r\n                  handleReqGroupChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />) : \r\n                (<SingleReq\r\n                  key={req.id} \r\n                  requirement={req}\r\n                  handleReqDeleted={deleteSubReq}\r\n                  handleReqChanged={(prop,new_value) => updateSubReq(req,prop,new_value)}\r\n                />)\r\n            })}\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <ButtonGroup>\r\n              <Button onClick={addSubGroup}>Add Req Group</Button>\r\n              <Button onClick={addSubReq}>Add Single Req</Button>\r\n            </ButtonGroup>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n      </Card>\r\n    )\r\n  }","import signal_lost from './images/signal_lost.png'\r\nimport grue from './images/grue.png'\r\nimport trader from './images/trade.png'\r\nimport default_image from './images/default.png'\r\n\r\nexport const special_nodes = [\"FAIL\",\"WIN\",\"GO_BACK\"]\r\n\r\nexport const site_traits = [\"ruins\",\"technology present\",\"space station\",\"alien\",\"habitable\",\"in vacuum\",\"in space\",\"on surface\"]\r\n\r\nexport const scan_bands = [\"Plasma absorbption band\",\"Hydrocarbons/Molecular oxygen\",\"Narrow-band radio waves\",\"Exotic Radiation\",\"Increased Density\"]\r\n\r\nexport const loot_types = [\"maint\",\"drugs\",\"research\",\"weapons\",\"pets\",\"unique\"]\r\n\r\n\r\nexport const preset_images = {\r\n    default : default_image,\r\n    grue : grue,\r\n    signal_lost : signal_lost,\r\n    trader : trader\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC7SURBVGje7ZdBDsJADAPjH2T//1lAgNrlxMVDiTynnjKyu6m6FUIIIfyA9aCtCq0XhMNo0bMoWRt7j3Za7rOPJ5fkNNj3Vk5zbVGOtiCJra9trFHSm6TdEvkka46kR0i2uX8t2bZRri+kPpax3FCSdjtESdwOpK0a05agtuwOJIiAIEUEKSKIGMmQtooIIiKIprQFSSqS71FHcjVJCD6gHzvmsuiOogVcSSO5ngQ5XcyeMDegEEIIYTBVNw34EbwIRO7ZAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJUExURQAAAP8AAP8hAFWgYwIAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABbSURBVGje7dPBDYAgEEVBtAKXCmT7L1LucgRi4kwDL/nZLQAAAAAAAPxQXOsbR8SGSG3rKy0zB+m5G/ZG3q/G5A3PQeTMDRNGjeU312+htuWRjLbheQAA+KxSHrpcA/wdxXfnAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJUExURQAAAP/YAH8zAHXkPMkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAF8SURBVGje7dkLbsMgDAZg8AnwDbzd/5BTk3aD+A9Ngp2ChvuSIuoP2W4TtWHGjBkzZsyYMWxE5uSYnpfwEuKa3il7vnmxz643b4rsVJ6+TbLnm9fdbUb05i2RvbGJ+pDIpaZUxsYO+X37DQgqtkYoCBkjeoRHQFCxNSLLbTgk6s9OG4KKvYOQM0KhfwQVW3/X34LI6945Qs4IKvZ6ltmsegj07xFUbI1I9jBC9HXFAAgs9j5CjggFc+R5McZmCCp2BbnWlGOIDITkxX4aWef/8l9pCuyoQigMhGTFjtaI1BAuVhXPPSPkhsBicxUhayTlq/pGYLHryPmmICQqRFwRNkfoIHK2KbCjCqFgjzBCslNME/J6yZG0rioPnWyKHEKEi0guyFeJcBOyFi++Rc79mgrHpkCWznMzosZGI6HFwGMDkNBg4LFhgKBLsaMBx6apNgeQ5IHwHQhKGM0RMDYbxOaPhu3YuCB7qCvCn0DSRCoRP4LwqMiMGb1GCD/OSlYEGoUISwAAAABJRU5ErkJggg==\"","import React,{useState} from 'react'\r\nimport { Card, FormControl, Row,Container,Col, InputGroup,Button, FormGroup,Table } from 'react-bootstrap'\r\nimport {useRecoilState} from 'recoil'\r\nimport {NodesSelector} from '../State'\r\nimport {special_nodes} from '../ExternalDefines'\r\n\r\nexport function BasicCollapsible(props){\r\n    const [sectionCollapsed,setSectionCollapsed] = useState(props.startCollapsed)\r\n    return(\r\n        <Container>\r\n            <Row>\r\n                <Col>\r\n                    <Card.Header onClick={() => setSectionCollapsed(!sectionCollapsed)}><Container><Row><Col className=\"flex-grow\">{props.title}</Col><Col className=\"flex-grow-0\">{sectionCollapsed ? \"▼\" : \"▲\"}</Col></Row></Container></Card.Header>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <Container className={sectionCollapsed ? \"d-none\" : \"\"}>\r\n                        <Row>\r\n                            <Col>\r\n                                {props.children}\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Col>\r\n            </Row>\r\n        </Container>)\r\n  }\r\n\r\n\r\nexport function NodeSelectionDropdown(props){\r\n    const {\r\n        allowNone = false,\r\n        allowCustom = true,\r\n        ...rest\r\n    } = props;\r\n\r\n    const [nodes] = useRecoilState(NodesSelector)\r\n        return (<FormControl {...rest} as=\"select\">\r\n            {nodes.map(node => (<option key={node.id}>{node.name}</option>))}\r\n            {!!allowNone && (<option value=\"\">None</option>)}\r\n            {!!allowCustom && (special_nodes.map(name => (<option>{name}</option>)))}\r\n        </FormControl>)\r\n}\r\n\r\nexport function KeyValueList(props){\r\n    const {\r\n        presetKeys,\r\n        value,\r\n        onChange = () => {}    } = props;\r\n    const [store,setStore] = useState(value)\r\n    const [newKey,setNewKey] = useState(presetKeys ? presetKeys[0] : \"\")\r\n    const [newValue,setNewValue] = useState(\"\")\r\n    const store_keys = Object.keys(store)\r\n\r\n    const add_new_kv_pair = () => {\r\n        const newstore = {...store,[newKey]:newValue}\r\n        setStore(newstore)\r\n        onChange(newstore)\r\n    }\r\n\r\n    const remove_key = key => {\r\n        const newstore = {...store}\r\n        delete newstore[key]\r\n        setStore(newstore)\r\n        onChange(newstore)\r\n    }\r\n\r\n    return (<Table size=\"sm\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Quality</th>\r\n                        <th>Value</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                {store_keys.map(key => (\r\n                <tr key={key}>\r\n                        <td>{key}</td>\r\n                        <td>{store[key]}</td>\r\n                        <td><Button variant=\"danger\" onClick={() => remove_key(key)}>Delete</Button></td>\r\n                </tr>\r\n                ))}\r\n                <tr>\r\n                    <td>{presetKeys ? (<FormControl as=\"select\" value={newKey} onChange={e => setNewKey(e.target.value)} >{presetKeys.map(pk => (<option key={pk}>{pk}</option>))}</FormControl>) : (<FormControl value={newKey} onChange={e => setNewKey(e.target.value)}></FormControl>)}</td>\r\n                    <td><FormControl value={newValue} onChange={e => setNewValue(e.target.value)}></FormControl></td>\r\n                    <td><Button onClick={add_new_kv_pair}>Add</Button></td>\r\n                </tr>\r\n                </tbody>\r\n            </Table>)\r\n}\r\n\r\n\r\nexport function SimpleList(props){\r\n    const {\r\n        presetValues,\r\n        value,\r\n        onChange = () => {},\r\n        unique= true    } = props;\r\n    const [store,setStore] = useState(value)\r\n    const [newValue,setNewValue] = useState(presetValues ? presetValues[0] : \"\")\r\n\r\n    const add_new_value = () => {\r\n        if(unique && store.indexOf(newValue) >= 0)\r\n            return\r\n        const newstore = [...store,newValue]\r\n        setStore(newstore)\r\n        onChange(newstore)\r\n    }\r\n\r\n    const remove_value = key => {\r\n        const newstore = store.filter(x => x !== key)\r\n        setStore(newstore)\r\n        onChange(newstore)\r\n    }\r\n\r\n    return (<FormGroup>\r\n            {store.map(key => (\r\n                <InputGroup key={key}>\r\n                    <InputGroup.Text>{key}</InputGroup.Text>\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"danger\" onClick={() => remove_value(key)}>X</Button>\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            ))}\r\n            <InputGroup>\r\n                <InputGroup.Prepend>\r\n                    {presetValues ? (<FormControl as=\"select\" value={newValue} onChange={e => setNewValue(e.target.value)} >{presetValues.map(pk => (<option key={pk}>{pk}</option>))}</FormControl>) : (<FormControl value={newValue} onChange={e => setNewValue(e.target.value)}></FormControl>)}\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                    <Button onClick={add_new_value}>Add</Button>\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        </FormGroup>)\r\n}","import React,{useState} from 'react'\r\nimport {Button, Card, InputGroup, FormControl } from 'react-bootstrap'\r\nimport {EffectBuilder} from './EffectBuilder'\r\nimport {RequirementsBuilder} from './RequirementsBuilder'\r\nimport {convertNumberValue} from '../Helpers'\r\nimport { NodeSelectionDropdown } from './Utility'\r\n\r\nexport function AdventureChoice(props) {\r\n    const handleChoiceDeletion = props.handleChoiceDeletion\r\n    const handleChoiceChange = props.handleChoiceChange\r\n  \r\n  \r\n    const addEffect = (effect_prop, new_effect) => {\r\n      const old_effects = props.choice[effect_prop]\r\n      const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n      const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n      const new_effects = props.choice[effect_prop].slice()\r\n      new_effects[props.choice[effect_prop].indexOf(old_effect)] = changed_effect\r\n      handleChoiceChange(effect_prop, new_effects)\r\n    }\r\n    const deleteEffect = (effect_prop, removed) => {\r\n      const new_effects = props.choice[effect_prop].filter(x => x !== removed)\r\n      handleChoiceChange(effect_prop, new_effects.length ? new_effects : undefined)\r\n    }\r\n  \r\n  \r\n    const addRequirement = added => {\r\n      const old_reqs = props.choice.requirements\r\n      const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n  \r\n    const deleteRequirement = removed => {\r\n      const new_reqs = props.choice.requirements.filter(x => x !== removed)\r\n      handleChoiceChange(\"requirements\", new_reqs.length ? new_reqs : undefined)\r\n    }\r\n  \r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n      const changed_req = { ...old_req, [changed_prop]: new_value }\r\n      const new_reqs = props.choice.requirements.slice()\r\n      new_reqs[props.choice.requirements.indexOf(old_req)] = changed_req\r\n      handleChoiceChange(\"requirements\", new_reqs)\r\n    }\r\n    const [exitNodeSelectValue, setExitNodeSelectValue] = useState(props.choice.exit_node);\r\n  \r\n    const changeExitNode = (e) => {\r\n      setExitNodeSelectValue(e.target.value)\r\n      handleChoiceChange(\"exit_node\", e.target.value)\r\n    }\r\n  \r\n  \r\n    return (\r\n      <Card>\r\n        <Card.Body>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Choice</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.choice.name} onChange={(e) => handleChoiceChange(\"name\", e.target.value)} />\r\n            <InputGroup.Append>\r\n              <Button variant=\"danger\" onClick={handleChoiceDeletion}>Delete</Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Exit Node</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <NodeSelectionDropdown value={exitNodeSelectValue} onChange={changeExitNode} allowNone={false}/>\r\n          </InputGroup>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text>Delay(ds)</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl value={props.choice.delay} onChange={(e) => handleChoiceChange(\"delay\", convertNumberValue(e.target.value))} />\r\n            <InputGroup.Text>Message</InputGroup.Text>\r\n            <FormControl value={props.choice.delay_message} onChange={(e) => handleChoiceChange(\"delay_message\", e.target.value)} />\r\n          </InputGroup>\r\n          <EffectBuilder\r\n              title=\"Selection Effects\"\r\n              effects={props.choice.on_selection_effects}\r\n              handleEffectAdded={added => addEffect(\"on_selection_effects\", added)}\r\n              handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_selection_effects\", old, prop, new_value)}\r\n              handleEffectDeleted={deleted => deleteEffect(\"on_selection_effects\", deleted)}/>\r\n          <RequirementsBuilder\r\n            title=\"Requirements\"\r\n            requirements={props.choice.requirements}\r\n            handleRequirementAdded={addRequirement}\r\n            handleRequirementDeleted={deleteRequirement}\r\n            handleRequirementsChanged={updateRequirements}\r\n          />\r\n        </Card.Body>\r\n      </Card>)\r\n  }","import React, { useRef } from 'react';\r\nimport { Button, Card,CardGroup, FormControl, FormGroup, Form, InputGroup } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport { updateProp } from '../Helpers'\r\nimport { NodeSelector, ChoiceData } from '../State'\r\nimport { AdventureChoice } from './AdventureChoice'\r\nimport { EffectBuilder } from './EffectBuilder'\r\nimport {preset_images} from '../ExternalDefines'\r\n\r\n\r\nexport function AdventureNode(props) {\r\n    const handleNodeDeletion = props.handleNodeDeletion\r\n\r\n    const [node, setNode] = useRecoilState(NodeSelector(props.node.id))\r\n\r\n    const update_node_name = (e) => {\r\n        const modified_node = updateProp(node, \"name\", e.target.value)\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const addChoice = (new_choice) => {\r\n        const new_choices = [...props.node.choices, new_choice]\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const removeChoice = (removed) => {\r\n        const new_choices = props.node.choices.filter(x => x !== removed)\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n    const updateChoice = (old_choice, new_choice) => {\r\n        const new_choices = props.node.choices.slice()\r\n        new_choices[props.node.choices.indexOf(old_choice)] = new_choice\r\n        setNode(updateProp(node, \"choices\", new_choices))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.node[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.node[effect_prop].slice()\r\n        new_effects[props.node[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setNode(updateProp(node, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.node[effect_prop].filter(x => x !== removed)\r\n        setNode(updateProp(node, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const current_image = node.raw_image ? node.raw_image : preset_images[node.image]\r\n    const imageInput = useRef()\r\n    const try_uploading_image = () => {\r\n        imageInput.current.click() //god why\r\n    }\r\n\r\n    const setUploadedImage = (e) => {\r\n        var reader = new FileReader()\r\n        reader.onload = (e) => {\r\n            var uploaded_image = new Image()\r\n            uploaded_image.onload = () =>{\r\n                if(uploaded_image.width !== 200 || uploaded_image.height !== 100){\r\n                    alert(`Adventure images need to be be 200x100 pngs.`)\r\n                    return\r\n                }\r\n                const modified_node = {...node,\r\n                    raw_image:e.target.result,\r\n                    image:null\r\n                }\r\n                setNode(modified_node)\r\n            }\r\n            uploaded_image.src = e.target.result\r\n        }\r\n        reader.readAsDataURL(e.target.files[0])\r\n    }\r\n\r\n    const reset_image = () => {\r\n        const modified_node = {...node,\r\n            raw_image:undefined,\r\n            image:\"default\"\r\n        }\r\n        setNode(modified_node)\r\n    }\r\n\r\n    const update_image = e => {\r\n        setNode(updateProp(node,\"image\",e.target.value))\r\n    }\r\n\r\n    const image_name_text = node.raw_image ? \"custom image data\" : node.image\r\n    return (\r\n        <CardGroup>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Title>{node.name} <Button variant=\"danger\" onClick={handleNodeDeletion}>Delete</Button></Card.Title>\r\n                            <Card.Img variant=\"top\" src={current_image}  />\r\n                            <InputGroup>\r\n                                <InputGroup.Prepend>\r\n                                    <InputGroup.Text>Image</InputGroup.Text>\r\n                                </InputGroup.Prepend>\r\n                                <Form.Control as=\"select\" value={image_name_text} readOnly={node.raw_image !== undefined} onChange={update_image}>\r\n                                    {Object.keys(preset_images).map(k => (<option key={k}>{k}</option>))}\r\n                                    </Form.Control>\r\n                                <Form.File type='file' accept=\"image/png\" ref={imageInput} onChange={setUploadedImage} style={{display:\"none\"}}/>\r\n                                <InputGroup.Append>\r\n                                    <Button onClick={try_uploading_image}>Custom</Button>\r\n                                    <Button onClick={reset_image}>Reset</Button>\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Node ID</Form.Label>\r\n                                <FormControl value={node.name} onChange={update_node_name} />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Form.Label>Description</Form.Label>\r\n                                <FormControl as=\"textarea\" rows={5} placeholder=\"Describe whatever here.\" value={node.description} onChange={(e) => setNode(updateProp(node, \"description\", e.target.value))} />\r\n                            </FormGroup>\r\n                            <EffectBuilder\r\n                                title=\"On Enter Effects\"\r\n                                effects={node.on_enter_effects}\r\n                                handleEffectAdded={added => addEffect(\"on_enter_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_enter_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_enter_effects\", deleted)} />\r\n                            <EffectBuilder\r\n                                title=\"On Exit Effects\"\r\n                                effects={node.on_exit_effects}\r\n                                parent_id={node.id}\r\n                                handleEffectAdded={added => addEffect(\"on_exit_effects\", added)}\r\n                                handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_exit_effects\", old, prop, new_value)}\r\n                                handleEffectDeleted={deleted => deleteEffect(\"on_exit_effects\", deleted)} />\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <Card.Title>Choices</Card.Title>\r\n                                {node.choices.map(choice => (\r\n                                        <AdventureChoice\r\n                                            choice={choice}\r\n                                            handleChoiceDeletion={() => removeChoice(choice)}\r\n                                            handleChoiceChange={(choice_property, new_value) => {\r\n                                                const new_choice = { ...choice, [choice_property]: new_value }\r\n                                                updateChoice(choice, new_choice)\r\n                                            }}\r\n                                        />))}\r\n                                <Button onClick={() => addChoice(new ChoiceData())}>Add Choice</Button>\r\n                        </Card.Body>\r\n                    </Card>\r\n            </CardGroup>\r\n    )\r\n}","import React from 'react';\r\nimport { Button, Card, FormControl, FormGroup, Form } from 'react-bootstrap'\r\nimport { useRecoilState } from 'recoil'\r\nimport { updateProp } from '../Helpers'\r\nimport { TriggerSelector } from '../State'\r\nimport { RequirementsBuilder } from './RequirementsBuilder'\r\nimport { EffectBuilder } from './EffectBuilder'\r\nimport {NodeSelectionDropdown} from './Utility'\r\n\r\n\r\nexport function AdventureTrigger(props) {\r\n    const handleDeletion = props.handleDeletion\r\n\r\n    const [trigger, setTrigger] = useRecoilState(TriggerSelector(props.trigger.id))\r\n\r\n    const update_trigger_name = (e) => {\r\n        setTrigger(updateProp(trigger, \"name\", e.target.value))\r\n    }\r\n\r\n    const update_trigger_target_node = (e) => {\r\n        setTrigger(updateProp(trigger, \"target_node\", e.target.value))\r\n    }\r\n\r\n    const addEffect = (effect_prop, new_effect) => {\r\n        const old_effects = props.trigger[effect_prop]\r\n        const new_effects = old_effects !== undefined ? [...old_effects, new_effect] : [new_effect]\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const updateEffects = (effect_prop, old_effect, changed_prop, new_value) => {\r\n        const changed_effect = { ...old_effect, [changed_prop]: new_value }\r\n        const new_effects = props.trigger[effect_prop].slice()\r\n        new_effects[props.trigger[effect_prop].indexOf(old_effect)] = changed_effect\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects))\r\n    }\r\n\r\n    const deleteEffect = (effect_prop, removed) => {\r\n        const new_effects = props.trigger[effect_prop].filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger, effect_prop, new_effects.length ? new_effects : undefined))\r\n    }\r\n\r\n    const addRequirement = added => {\r\n        const old_reqs = props.trigger.requirements\r\n        const new_reqs = old_reqs !== undefined ? [...old_reqs, added] : [added]\r\n        setTrigger(updateProp(trigger,\"requirements\", new_reqs))\r\n    }\r\n\r\n    const deleteRequirement = removed => {\r\n        const new_reqs = props.trigger.requirements.filter(x => x !== removed)\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs.length ? new_reqs : undefined))\r\n    }\r\n\r\n    const updateRequirements = (old_req, changed_prop, new_value) => {\r\n        const changed_req = { ...old_req, [changed_prop]: new_value }\r\n        const new_reqs = props.trigger.requirements.slice()\r\n        new_reqs[props.trigger.requirements.indexOf(old_req)] = changed_req\r\n        setTrigger(updateProp(trigger,\"requirements\",  new_reqs))\r\n    }\r\n\r\n\r\n    return (\r\n        <Card>\r\n            <Card.Body>\r\n                <Card.Title>Trigger <Button variant=\"danger\" onClick={handleDeletion}>Delete</Button></Card.Title>\r\n                <FormGroup>\r\n                    <Form.Label>Trigger ID</Form.Label>\r\n                    <FormControl value={trigger.name} onChange={update_trigger_name} />\r\n                </FormGroup>\r\n                <FormGroup>\r\n                    <Form.Label>Target Node On Trigger</Form.Label>\r\n                    <NodeSelectionDropdown allowNone={true} value={trigger.target_node} onChange={update_trigger_target_node}/>\r\n                </FormGroup>\r\n                <EffectBuilder\r\n                    title=\"On Trigger Effects\"\r\n                    effects={trigger.on_trigger_effects}\r\n                    handleEffectAdded={added => addEffect(\"on_trigger_effects\", added)}\r\n                    handleEffectsChanged={(old, prop, new_value) => updateEffects(\"on_trigger_effects\", old, prop, new_value)}\r\n                    handleEffectDeleted={deleted => deleteEffect(\"on_trigger_effects\", deleted)} />\r\n                <RequirementsBuilder\r\n                    title=\"Trigger Requirements\"\r\n                    requirements={props.trigger.requirements}\r\n                    handleRequirementAdded={addRequirement}\r\n                    handleRequirementDeleted={deleteRequirement}\r\n                    handleRequirementsChanged={updateRequirements}\r\n                />\r\n            </Card.Body>\r\n        </Card>\r\n\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { Button, Col, Container, Row, Card,Alert } from 'react-bootstrap'\r\nimport {preset_images} from '../ExternalDefines'\r\n\r\n\r\nexport function AdventurePlayer(props) {\r\n\r\n    const {\r\n        adventure\r\n    } = props\r\n\r\n    const [currentNode,setCurrentNode] = useState(adventure.nodes.find(node => node.name === adventure.starting_node) || adventure.nodes[0])\r\n    const [,setQualities] = useState(adventure.starting_qualities)\r\n    \r\n    const restart_test = () => {\r\n        setCurrentNode(adventure.nodes.find(node => node.name === adventure.starting_node) || adventure.nodes[0])\r\n        setQualities(adventure.starting_qualities)\r\n    }\r\n\r\n    const checkChoice = () => {\r\n        return true;\r\n    }\r\n\r\n    const selectChoice = choice => {\r\n        setCurrentNode(adventure.nodes.find(node => node.name === choice.exit_node))\r\n    }\r\n\r\n    if(!currentNode)\r\n        return (<Alert variant=\"danger\">You need at least one node to play.</Alert>)\r\n\r\n    return (\r\n        <Container>\r\n            <Alert variant=\"danger\">Unfinished, this is not representative of how it works in-game for now.</Alert>\r\n            <Row>\r\n                <Col>\r\n                <Button onClick={restart_test}>Restart</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <Card>\r\n                        <Card.Img src={currentNode.raw_image ? currentNode.raw_image : preset_images[currentNode.image]}/>\r\n                        <Card.Body>\r\n                            <Card.Text>{currentNode.description}</Card.Text>\r\n                            <Container>\r\n                                {currentNode.choices.filter(choice => checkChoice(choice)).map(choice => (\r\n                                    <Row><Col><Button onClick={() => selectChoice(choice)}>{choice.name}</Button></Col></Row>\r\n                                ))}\r\n                            </Container>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}","import React,{useRef, useState} from 'react'\r\nimport { Button, Col, Container, Row, Tab, Nav, FormControl, FormGroup, Form, ButtonGroup,Modal } from 'react-bootstrap'\r\nimport {useRecoilState} from 'recoil'\r\nimport {AdventureState,NodesSelector,NodeData,TriggersSelector,TriggerData, unique_id} from './../State'\r\nimport {updateProp} from './../Helpers'\r\nimport {AdventureNode} from './AdventureNode'\r\nimport {AdventureTrigger} from './AdventureTrigger'\r\nimport {BasicCollapsible,NodeSelectionDropdown, KeyValueList, SimpleList} from './Utility'\r\nimport {scan_bands, loot_types, site_traits} from '../ExternalDefines'\r\nimport { AdventurePlayer } from './AdventurePlayer'\r\n\r\n\r\nexport function AdventureEditor() {\r\n    const [adventure,setAdventure] = useRecoilState(AdventureState);\r\n    const [nodes] = useRecoilState(NodesSelector)\r\n    const [triggers] = useRecoilState(TriggersSelector)\r\n\r\n    const [activeTab,setActiveTab] = useState(\"\")\r\n    const [draggedItem,setDraggedItem] = useState(null)\r\n   \r\n    const add_node = () => {\r\n      const modified_adventure = {...adventure,\r\n        nodes:[...nodes,new NodeData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n    }\r\n    const delete_node = (node) => {\r\n      const changed_nodes = nodes.filter(x => x !== node)\r\n      setAdventure(updateProp(adventure,\"nodes\",changed_nodes))\r\n    }\r\n\r\n    const add_trigger = () => {\r\n      const modified_adventure = {...adventure,\r\n        triggers:[...triggers,new TriggerData()]\r\n      }\r\n      setAdventure(modified_adventure)\r\n\r\n    }\r\n    const delete_trigger = (trigger) => {\r\n      const changed_triggers = triggers.filter(x => x !== trigger)\r\n      setAdventure(updateProp(adventure,\"triggers\",changed_triggers))\r\n      \r\n    }\r\n\r\n    \r\n    const handleExport = () => {\r\n      const data_object = {\r\n        adventure_name: adventure.name,\r\n        starting_node: startingNode,\r\n        starting_qualities: adventure.starting_qualities,\r\n        band_modifiers: adventure.band_modifiers,\r\n        loot_categories : adventure.loot_types,\r\n        scan_band_mods : adventure.band_modifiers,\r\n        nodes: nodes\r\n      }\r\n      //Internal stuff, byond doesn't care about this\r\n      const remove_ids = (key, value) => {\r\n        if (key === \"id\")\r\n          return undefined\r\n        return value;\r\n      }\r\n      const blob = new Blob([JSON.stringify(data_object, remove_ids)], { type: 'application/json' })\r\n      const blob_url = URL.createObjectURL(blob)\r\n      window.open(blob_url)\r\n    }\r\n  \r\n    const handleImport = e => {\r\n      var reader = new FileReader()\r\n      reader.onload = (e) =>{\r\n        const generate_ids = (key,value) => {\r\n          if(value === Object(value)) //Thanks StackOverflow\r\n          {\r\n            value.id = unique_id(\"import\")\r\n          }\r\n          return value\r\n        }\r\n        const result = JSON.parse(e.target.result,generate_ids)\r\n  \r\n        const modified_adventure = {...adventure,\r\n          name:result.adventure_name,\r\n          starting_node:result.starting_node,\r\n          triggers:result.triggers,\r\n          nodes:result.nodes\r\n        }\r\n        setAdventure(modified_adventure)\r\n      }\r\n      reader.readAsText(e.target.files[0])\r\n    }\r\n\r\n    const ImportInput = useRef()\r\n    const clickImport = () => {\r\n      ImportInput.current.click()\r\n    }\r\n\r\n    const start_dragging = (e,node) => {\r\n      setDraggedItem(node)\r\n    } \r\n\r\n    const end_dragging = () => {\r\n      setDraggedItem(null)\r\n    }\r\n\r\n    const switch_node = (node) => {\r\n      if(draggedItem != null){\r\n        const index_a = nodes.indexOf(node)\r\n        const index_b = nodes.indexOf(draggedItem)\r\n        const modified_nodes = nodes.slice();\r\n        [modified_nodes[index_a],modified_nodes[index_b]] = [modified_nodes[index_b],modified_nodes[index_a]]\r\n        setAdventure(updateProp(adventure,\"nodes\",modified_nodes))\r\n      }\r\n    }\r\n\r\n    const validate_drop = (e,node) => {\r\n      if(draggedItem != null && node !== draggedItem){\r\n        e.preventDefault()\r\n      }\r\n    }\r\n\r\n    const getDefaultTab = () => {\r\n      if(nodes.length)\r\n        return nodes[0].id.toString()\r\n    }\r\n    const openTab = activeTab || getDefaultTab()\r\n    \r\n    const getDefaultStartingNode = () => {\r\n      if(nodes.length)\r\n        return nodes[0].name\r\n    }\r\n    const startingNode = adventure.starting_node || getDefaultStartingNode()\r\n\r\n\r\n    const [playing,setPlaying] = useState(false)\r\n\r\n    const toggle_playing = () => {\r\n      setPlaying(!playing)\r\n    }\r\n\r\n    return (\r\n    <>\r\n    <Modal show={playing} onHide={toggle_playing}>\r\n      <AdventurePlayer adventure={adventure}/>\r\n    </Modal>\r\n    <Container>\r\n      <Row>\r\n        <Col>\r\n        <ButtonGroup>\r\n            <Button onClick={handleExport}>Export</Button>\r\n            <Button onClick={clickImport}>Import</Button>\r\n            <Form.File\r\n              onChange={handleImport}\r\n              accept=\".json\"\r\n              ref={ImportInput}\r\n              style ={{display:\"none\"}}/>\r\n            <Button onClick={toggle_playing}>Test</Button>\r\n        </ButtonGroup>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n        <BasicCollapsible title=\"Adventure Config\">\r\n            <Form>\r\n              <FormGroup>\r\n                <Form.Label>Adventure name</Form.Label>\r\n                <FormControl placeholder=\"New adventure\" value={adventure.name} onChange={(e) => setAdventure(updateProp(adventure,\"name\",e.target.value))} />\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Form.Label>Starting node</Form.Label>\r\n                <NodeSelectionDropdown value={startingNode} onChange={(e) => setAdventure(updateProp(adventure,\"starting_node\",e.target.value))} allowCustom={false}/>\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Form.Label>Starting qualities</Form.Label>\r\n                <KeyValueList value={adventure.starting_qualities} onChange={new_value => setAdventure(updateProp(adventure,\"starting_qualities\",new_value))}/>\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Form.Label>Required site traits</Form.Label>\r\n                <SimpleList presetValues={site_traits} value={adventure.required_site_traits} onChange={new_value => setAdventure(updateProp(adventure,\"required_site_traits\",new_value))}/>\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Form.Label>Loot type</Form.Label>\r\n                <SimpleList presetValues={loot_types} value={adventure.loot_types} onChange={new_value => setAdventure(updateProp(adventure,\"loot_types\",new_value))}/>\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Form.Label>Scanning modifiers</Form.Label>\r\n                <KeyValueList presetKeys={scan_bands} value={adventure.band_modifiers} onChange={new_value => setAdventure(updateProp(adventure,\"band_modifiers\",new_value))}/>\r\n              </FormGroup>\r\n            </Form>\r\n        </BasicCollapsible>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <BasicCollapsible title=\"Nodes\">\r\n          <Tab.Container id=\"nodes\" activeKey={openTab} onSelect={e => setActiveTab(e)}>\r\n            <Row>\r\n              <Col>\r\n                <Nav variant=\"tabs\">\r\n                  {nodes.map(node => (\r\n                    <Nav.Item \r\n                      key={node.id} \r\n                      draggable \r\n                      onDragEnd={e => end_dragging(e,node)} \r\n                      onDragStart={e => start_dragging(e,node)} \r\n                      onDrop={() => switch_node(node)}\r\n                      onDragOver={e => validate_drop(e,node)}\r\n                      >\r\n                      <Nav.Link eventKey={node.id}>{node.name}</Nav.Link>\r\n                    </Nav.Item>))}\r\n                  <Nav.Item>\r\n                    <Nav.Link onClick={add_node}>Add Node</Nav.Link>\r\n                  </Nav.Item>\r\n                </Nav>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Tab.Content>\r\n                    {nodes.map(node => (\r\n                      <Tab.Pane eventKey={node.id} key={node.id}>\r\n                        <AdventureNode \r\n                          node={node}\r\n                          handleNodeDeletion={() => delete_node(node)}\r\n                          />\r\n                      </Tab.Pane>))}\r\n                  </Tab.Content>\r\n              </Col>\r\n            </Row>\r\n          </Tab.Container>\r\n          </BasicCollapsible>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n        <BasicCollapsible title=\"Triggers\" startCollapsed>\r\n          <Container>\r\n            <Row>\r\n              {triggers.map(trigger => (\r\n                <Col xl=\"auto\"><AdventureTrigger trigger={trigger} handleDeletion={() => delete_trigger(trigger)}/></Col>\r\n              ))}\r\n              <Col>\r\n                <Button onClick={add_trigger}>Add Trigger</Button>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </BasicCollapsible>\r\n        </Col>\r\n      </Row>\r\n    </Container></>)\r\n  }","import './App.css';\r\nimport {RecoilRoot} from 'recoil'\r\nimport {AdventureEditor} from './Components/AdventureEditor'\r\n\r\n/*\r\nTODO:\r\nBasic validation of loops/invalid node ids and such.\r\nStyling this to look good aaahhh!!!\r\n*/\r\n\r\nfunction App(){\r\n  return (\r\n    <RecoilRoot>\r\n      <AdventureEditor/>\r\n    </RecoilRoot>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}