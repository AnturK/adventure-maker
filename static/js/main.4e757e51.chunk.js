(this["webpackJsonpadventure-maker"]=this["webpackJsonpadventure-maker"]||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var c=t(0),i=t.n(c),r=t(16),a=t.n(r),d=(t(41),t(42),t(28)),s=t(10),o=t(9),j=t(11),l=t(17),u=(t(43),t(51)),h=t(52),f=t(31),b=t(60),O=t(53),x=t(32),A=t(58),v=t(33),p=t(54),g=t(34),m=t(55),q=t(56),C=t(57),_=t(59),R=t(1),D={};function k(e){return e in D?D[e]+=1:D[e]=0,D[e]}var E=function e(){Object(l.a)(this,e),this.id=k("node"),this.name="Node "+this.id,this.description="Node description goes here",this.choices=[],this.image="yes",this.on_enter_effects=void 0,this.on_exit_effects=void 0},y=function e(){Object(l.a)(this,e),this.id=k("choice"),this.name="New Choice",this.exit_node="FAIL",this.on_selection_effects=void 0,this.requirements=void 0},w=function e(){Object(l.a)(this,e),this.id=k("effect"),this.effect_type="Add",this.quality="Quality",this.value=1},S=function e(){Object(l.a)(this,e),this.id=k("req"),this.group_type="AND",this.requirements=[]},N=function e(){Object(l.a)(this,e),this.id=k("req"),this.quality="Quality",this.operator="==",this.value=1};function T(e){var n=e.handleNodeDeletion,t=e.handleNodeChange,c=function(n,c){var i=e.node[n],r=void 0!==i?[].concat(Object(j.a)(i),[c]):[c];t(n,r)},i=function(n,c,i,r){var a=Object(o.a)(Object(o.a)({},c),{},Object(s.a)({},i,r)),d=e.node[n].slice();d[e.node[n].indexOf(c)]=a,t(n,d)},r=function(n,c){var i=e.node[n].filter((function(e){return e!==c}));t(n,i.length?i:void 0)};return Object(R.jsx)(u.a,{fluid:!0,children:Object(R.jsxs)(h.a,{children:[Object(R.jsx)(f.a,{children:Object(R.jsxs)(b.a,{children:[Object(R.jsx)(b.a.Img,{variant:"top",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC"}),Object(R.jsxs)(b.a.Body,{children:[Object(R.jsxs)(b.a.Title,{children:[e.node.name," ",Object(R.jsx)(O.a,{variant:"danger",onClick:n,children:"Delete"})]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(A.a.Label,{children:"Node ID"}),Object(R.jsx)(v.a,{value:e.node.name,onChange:function(e){return t("name",e.target.value)}})]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(A.a.Label,{children:"Description"}),Object(R.jsx)(v.a,{as:"textarea",rows:5,placeholder:"Describe whatever here.",value:e.node.description,onChange:function(e){return t("description",e.target.value)}})]}),Object(R.jsx)(I,{title:"On Enter Effects",effects:e.node.on_enter_effects,handleEffectAdded:function(e){return c("on_enter_effects",e)},handleEffectsChanged:function(e,n,t){return i("on_enter_effects",e,n,t)},handleEffectDeleted:function(e){return r("on_enter_effects",e)}}),Object(R.jsx)(I,{title:"On Exit Effects",effects:e.node.on_exit_effects,handleEffectAdded:function(e){return c("on_exit_effects",e)},handleEffectsChanged:function(e,n,t){return i("on_exit_effects",e,n,t)},handleEffectDeleted:function(e){return r("on_exit_effects",e)}})]})]})}),Object(R.jsx)(f.a,{children:Object(R.jsx)(b.a,{children:Object(R.jsxs)(b.a.Body,{children:[Object(R.jsx)(b.a.Header,{children:"Choices"}),Object(R.jsxs)(p.a,{children:[e.node.choices.map((function(n){return Object(R.jsx)(p.a.Item,{children:Object(R.jsx)(U,{choice:n,handleChoiceDeletion:function(){return function(n){var c=e.node.choices.filter((function(e){return e!==n}));t("choices",c)}(n)},handleChoiceChange:function(c,i){var r=Object(o.a)(Object(o.a)({},n),{},Object(s.a)({},c,i));!function(n,c){var i=e.node.choices.slice();i[e.node.choices.indexOf(n)]=c,t("choices",i)}(n,r)},all_nodes:e.all_nodes})},n.id)})),Object(R.jsx)(g.a,{children:Object(R.jsx)(O.a,{onClick:function(){return function(n){var c=[].concat(Object(j.a)(e.node.choices),[n]);t("choices",c)}(new y)},children:"Add Choice"})})]})]})})})]})})}function I(e){var n=e.handleEffectsChanged,t=e.handleEffectAdded,c=e.handleEffectDeleted;function i(){t(new w)}return e.effects?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(b.a.Header,{children:e.title}),Object(R.jsxs)(p.a,{children:[e.effects.map((function(e){return Object(R.jsx)(g.a,{children:Object(R.jsxs)(m.a,{children:[Object(R.jsxs)(v.a,{as:"select",value:e.effect_type,onChange:function(t){return n(e,"effect_type",t.target.value)},children:[Object(R.jsx)("option",{children:"Add"}),Object(R.jsx)("option",{children:"Remove"}),Object(R.jsx)("option",{children:"Set"})]}),Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:"Quality"})}),Object(R.jsx)(v.a,{value:e.quality,onChange:function(t){return n(e,"quality",t.target.value)}}),Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:"Value"})}),Object(R.jsx)(v.a,{value:e.value,onChange:function(t){return n(e,"value",t.target.value)}}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{variant:"danger",onClick:function(){return c(e)},children:"Delete"})})]})},e.id)})),Object(R.jsx)(g.a,{children:Object(R.jsx)(O.a,{onClick:i,children:"Add New Effect"})})]})]}):Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:e.title})}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{onClick:i,children:"Create Effect"})})]})}function L(e){var n=e.handleRequirementsChanged,t=e.handleRequirementAdded,c=e.handleRequirementDeleted;function i(){t(new N)}return e.requirements?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(b.a.Header,{children:e.title}),Object(R.jsxs)(p.a,{children:[e.requirements.map((function(e){return e.requirements?Object(R.jsx)(P,{group:e,handleReqGroupChanged:function(t,c){return n(e,t,c)},handleReqGroupDeleted:function(){return c(e)}},e.id):Object(R.jsx)(G,{requirement:e,handleReqChanged:function(t,c){return n(e,t,c)},handleReqDeleted:function(){return c(e)}},e.id)})),Object(R.jsx)(g.a,{children:Object(R.jsxs)(q.a,{children:[Object(R.jsx)(O.a,{onClick:function(){t(new S)},children:"Add Req Group"}),Object(R.jsx)(O.a,{onClick:i,children:"Add Single Req"})]})})]})]}):Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:e.title})}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{onClick:i,children:"Add Requirements"})})]})}function G(e){var n=e.handleReqDeleted,t=e.handleReqChanged;return Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:"Quality"})}),Object(R.jsx)(v.a,{value:e.requirement.quality,onChange:function(e){return t("quality",e.target.value)}}),Object(R.jsxs)(v.a,{as:"select",value:e.requirement.operator,onChange:function(e){return t("operator",e.target.value)},children:[Object(R.jsx)("option",{children:"=="}),Object(R.jsx)("option",{children:"!="}),Object(R.jsx)("option",{children:">"}),Object(R.jsx)("option",{children:"<"}),Object(R.jsx)("option",{children:">="}),Object(R.jsx)("option",{children:"<="})]}),Object(R.jsx)(v.a,{value:e.requirement.value,onChange:function(e){return t("value",e.target.value)}}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{variant:"danger",onClick:function(){return n(e.requirement)},children:"Delete"})})]})}function P(e){var n=e.handleReqGroupDeleted,t=e.handleReqGroupChanged,c=function(n){var c=e.group.requirements.filter((function(e){return e!==n}));t("requirements",c)},i=function(n,c,i){var r=Object(o.a)(Object(o.a)({},n),{},Object(s.a)({},c,i)),a=e.group.requirements.slice();a[e.group.requirements.indexOf(n)]=r,t("requirements",a)};return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(b.a.Header,{children:Object(R.jsxs)(m.a,{children:[Object(R.jsxs)(v.a,{as:"select",value:e.group.group_type,onChange:function(e){return t("group_type",e.target.value)},children:[Object(R.jsx)("option",{children:"AND"}),Object(R.jsx)("option",{children:"OR"})]}),Object(R.jsx)(m.a.Text,{children:"Group"}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{variant:"danger",onClick:function(){return n(e.group)},children:"Delete"})})]})}),Object(R.jsxs)(p.a,{children:[Object(R.jsx)(g.a,{children:e.group.requirements.map((function(e){return e.requirements?Object(R.jsx)(P,{group:e,handleReqGroupDeleted:c,handleReqGroupChanged:function(n,t){return i(e,n,t)}},e.id):Object(R.jsx)(G,{requirement:e,handleReqDeleted:c,handleReqChanged:function(n,t){return i(e,n,t)}},e.id)}))}),Object(R.jsx)(g.a,{children:Object(R.jsxs)(q.a,{children:[Object(R.jsx)(O.a,{onClick:function(){var n=new S,c=[].concat(Object(j.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Req Group"}),Object(R.jsx)(O.a,{onClick:function(){var n=new N,c=[].concat(Object(j.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Single Req"})]})})]})]})}function U(e){var n=e.handleChoiceDeletion,t=e.handleChoiceChange;return Object(R.jsx)(b.a,{children:Object(R.jsxs)(b.a.Body,{children:[Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:"Choice"})}),Object(R.jsx)(v.a,{value:e.choice.name,onChange:function(e){return t("name",e.target.value)}}),Object(R.jsx)(m.a.Append,{children:Object(R.jsx)(O.a,{variant:"danger",onClick:n,children:"Delete"})})]}),Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a.Prepend,{children:Object(R.jsx)(m.a.Text,{children:"Exit Node"})}),Object(R.jsxs)(v.a,{as:"select",value:e.exit_node,onChange:function(e){return t("exit_node",e.target.value)},children:[Object(R.jsx)("option",{children:"FAIL"}),Object(R.jsx)("option",{children:"WIN"}),e.all_nodes.map((function(e){return Object(R.jsx)("option",{children:e.name},e.id)}))]})]}),Object(R.jsx)(I,{title:"Selection Effects",effects:e.choice.on_selection_effects,handleEffectAdded:function(n){return function(n,c){var i=e.choice[n],r=void 0!==i?[].concat(Object(j.a)(i),[c]):[c];t(n,r)}("on_selection_effects",n)},handleEffectsChanged:function(n,c,i){return function(n,c,i,r){var a=Object(o.a)(Object(o.a)({},c),{},Object(s.a)({},i,r)),d=e.choice[n].slice();d[e.choice[n].indexOf(c)]=a,t(n,d)}("on_selection_effects",n,c,i)},handleEffectDeleted:function(n){return function(n,c){var i=e.choice[n].filter((function(e){return e!==c}));t(n,i.length?i:void 0)}("on_selection_effects",n)}}),Object(R.jsx)(L,{title:"Requirements",requirements:e.choice.requirements,handleRequirementAdded:function(n){var c=e.choice.requirements,i=void 0!==c?[].concat(Object(j.a)(c),[n]):[n];t("requirements",i)},handleRequirementDeleted:function(n){var c=e.choice.requirements.filter((function(e){return e!==n}));t("requirements",c.length?c:void 0)},handleRequirementsChanged:function(n,c,i){var r=Object(o.a)(Object(o.a)({},n),{},Object(s.a)({},c,i)),a=e.choice.requirements.slice();a[e.choice.requirements.indexOf(n)]=r,t("requirements",a)}})]})})}var B=function(){var e=Object(c.useState)("New Adventure"),n=Object(d.a)(e,2),t=n[0],i=n[1],r=Object(c.useState)("START"),a=Object(d.a)(r,2),l=a[0],b=a[1],p=Object(c.useState)([]),g=Object(d.a)(p,2),m=g[0],q=g[1],D=Object(c.useCallback)((function(){var e={adventure_name:t,starting_node:l,nodes:m},n=new Blob([JSON.stringify(e,(function(e,n){if("id"!==e)return n}))],{type:"application/json"}),c=URL.createObjectURL(n);window.open(c)}),[t,l,m]);return Object(R.jsxs)(u.a,{children:[Object(R.jsxs)(A.a,{children:[Object(R.jsxs)(x.a,{children:[Object(R.jsx)(A.a.Label,{children:"Adventure name"}),Object(R.jsx)(v.a,{placeholder:"New adventure",value:t,onChange:function(e){return i(e.target.value)}})]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(A.a.Label,{children:"Starting node"}),Object(R.jsx)(v.a,{as:"select",value:l,onChange:function(e){return b(e.target.value)},children:m.map((function(e){return Object(R.jsx)("option",{children:e.name},e.id)}))})]})]}),Object(R.jsxs)(C.a.Container,{id:"nodes",children:[Object(R.jsx)(h.a,{children:Object(R.jsx)(f.a,{children:Object(R.jsxs)(_.a,{variant:"tabs",children:[m.map((function(e){return Object(R.jsx)(_.a.Item,{children:Object(R.jsx)(_.a.Link,{eventKey:e.id,children:e.name})},e.id)})),Object(R.jsx)(_.a.Item,{children:Object(R.jsx)(_.a.Link,{onClick:function(){return e=new E,q((function(n){return[].concat(Object(j.a)(n),[e])}));var e},children:"Add Node"})})]})})}),Object(R.jsx)(h.a,{children:Object(R.jsx)(f.a,{children:Object(R.jsx)(C.a.Content,{children:m.map((function(e){return Object(R.jsx)(C.a.Pane,{eventKey:e.id,children:Object(R.jsx)(T,{node:e,handleNodeDeletion:function(){return n=e,q((function(e){return e.filter((function(e){return e!==n}))}));var n},handleNodeChange:function(n,t){var c=Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},n,t));!function(e,n){q((function(t){var c=t.slice();return c[t.indexOf(e)]=n,c}))}(e,c)},all_nodes:m})},e.id)}))})})})]}),Object(R.jsx)(h.a,{children:Object(R.jsxs)(f.a,{children:[Object(R.jsx)(O.a,{onClick:D,children:"Export"}),Object(R.jsx)(A.a.Group,{children:Object(R.jsx)(A.a.File,{label:"Import",onChange:function(e){var n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result,(function(e,n){return n===Object(n)&&(n.id=k("import")),n}));i(n.adventure_name),b(n.starting_node),q(n.nodes)},n.readAsText(e.target.files[0])},custom:!0})})]})})]})},F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,61)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(R.jsx)(i.a.StrictMode,{children:Object(R.jsx)(B,{})}),document.getElementById("root")),F()}},[[48,1,2]]]);
//# sourceMappingURL=main.4e757e51.chunk.js.map