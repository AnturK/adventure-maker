(this["webpackJsonpadventure-maker"]=this["webpackJsonpadventure-maker"]||[]).push([[0],{48:function(e,n,t){},49:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var c=t(0),i=t.n(c),r=t(17),a=t.n(r),d=(t(47),t(48),t(49),t(13)),s=t(14),o=t(5),j=t(7),l=t(62),u=t(65),h=t(39),f=t(37),b=t(64),O=t(63),x=t(40),g=t(66),v=t(58),p=t(9),m=t(12);function A(e,n,t){var c=e.slice();return c[e.indexOf(n)]=t,c}function C(e,n,t){return Object(o.a)(Object(o.a)({},e),{},Object(m.a)({},n,t))}var q={};function _(e){return e in q?q[e]+=1:q[e]=0,q[e]}var R=function e(){Object(p.a)(this,e),this.id=_("node"),this.name="Node "+this.id,this.description="Node description goes here",this.choices=[],this.image="default",this.image_raw=void 0,this.on_enter_effects=void 0,this.on_exit_effects=void 0},k=function e(){Object(p.a)(this,e),this.id=_("choice"),this.name="New Choice",this.exit_node="FAIL",this.on_selection_effects=void 0,this.requirements=void 0},y=function e(){Object(p.a)(this,e),this.id=_("effect"),this.effect_type="Add",this.quality="Quality",this.value=1},D=function e(){Object(p.a)(this,e),this.id=_("req"),this.group_type="AND",this.requirements=[]},w=function e(){Object(p.a)(this,e),this.id=_("req"),this.quality="Quality",this.operator="==",this.value=1},E=Object(d.b)({key:"adventure",default:new function e(){Object(p.a)(this,e),this.name="New adventure",this.starting_node="",this.nodes=[],this.required_traits=[],this.loot_types=[],this.scanner_band_modifiers=[]}}),I=Object(d.c)({key:"nodes",get:function(e){return(0,e.get)(E).nodes}}),S=Object(d.d)({key:"single_node",get:function(e){return function(n){return(0,n.get)(E).nodes.find((function(n){return n.id===e}))}},set:function(e){return function(n,t){var c=n.set,i=(0,n.get)(E),r=Object(o.a)(Object(o.a)({},i),{},{nodes:A(i.nodes,i.nodes.find((function(n){return n.id===e})),t)});c(E,r)}}}),N=t(61),L=t(67),T=t(57),P=t(59),F=t(38),U=t(1);function G(e){var n=e.handleChange,t=e.handleDelete;return Object(U.jsxs)(T.a,{children:[Object(U.jsxs)(f.a,{as:"select",value:e.effect.effect_type,onChange:function(e){return n("effect_type",e.target.value)},children:[Object(U.jsx)("option",{children:"add"}),Object(U.jsx)("option",{children:"remove"}),Object(U.jsx)("option",{children:"set"})]}),Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Quality"})}),Object(U.jsx)(f.a,{value:e.effect.quality,onChange:function(e){return n("quality",e.target.value)}}),Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Value"})}),Object(U.jsx)(f.a,{value:e.effect.value,onChange:function(e){return n("value",e.target.value)}}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{variant:"danger",onClick:t,children:"Delete"})})]})}function B(e){var n=e.handleEffectsChanged,t=e.handleEffectAdded,c=e.handleEffectDeleted;function i(){t(new y)}return e.effects?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(L.a.Header,{children:e.title}),Object(U.jsxs)(P.a,{children:[e.effects.map((function(e){return Object(U.jsx)(F.a,{children:Object(U.jsx)(G,{effect:e,handleChange:function(t,c){return n(e,t,c)},handleDelete:function(n,t){return c(e,n,t)}})},e.id)})),Object(U.jsx)(F.a,{children:Object(U.jsx)(v.a,{onClick:i,children:"Add New Effect"})})]})]}):Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:e.title})}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{onClick:i,children:"Create Effect"})})]})}var Q=t(60);function J(e){var n=e.handleRequirementsChanged,t=e.handleRequirementAdded,c=e.handleRequirementDeleted;function i(){t(new w)}return e.requirements?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(L.a.Header,{children:e.title}),Object(U.jsxs)(P.a,{children:[e.requirements.map((function(e){return e.requirements?Object(U.jsx)(X,{group:e,handleReqGroupChanged:function(t,c){return n(e,t,c)},handleReqGroupDeleted:function(){return c(e)}},e.id):Object(U.jsx)(W,{requirement:e,handleReqChanged:function(t,c){return n(e,t,c)},handleReqDeleted:function(){return c(e)}},e.id)})),Object(U.jsx)(P.a.Item,{children:Object(U.jsxs)(Q.a,{children:[Object(U.jsx)(v.a,{onClick:function(){t(new D)},children:"Add Req Group"}),Object(U.jsx)(v.a,{onClick:i,children:"Add Single Req"})]})})]})]}):Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:e.title})}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{onClick:i,children:"Add Requirements"})})]})}function W(e){var n=e.handleReqDeleted,t=e.handleReqChanged;return Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Quality"})}),Object(U.jsx)(f.a,{value:e.requirement.quality,onChange:function(e){return t("quality",e.target.value)}}),Object(U.jsxs)(f.a,{as:"select",value:e.requirement.operator,onChange:function(e){return t("operator",e.target.value)},children:[Object(U.jsx)("option",{children:"=="}),Object(U.jsx)("option",{children:"!="}),Object(U.jsx)("option",{children:">"}),Object(U.jsx)("option",{children:"<"}),Object(U.jsx)("option",{children:">="}),Object(U.jsx)("option",{children:"<="})]}),Object(U.jsx)(f.a,{value:e.requirement.value,onChange:function(e){return t("value",e.target.value)}}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{variant:"danger",onClick:function(){return n(e.requirement)},children:"Delete"})})]})}function X(e){var n=e.handleReqGroupDeleted,t=e.handleReqGroupChanged,c=function(n){var c=e.group.requirements.filter((function(e){return e!==n}));t("requirements",c)},i=function(n,c,i){var r=Object(o.a)(Object(o.a)({},n),{},Object(m.a)({},c,i)),a=e.group.requirements.slice();a[e.group.requirements.indexOf(n)]=r,t("requirements",a)};return Object(U.jsxs)(L.a,{border:"dark",children:[Object(U.jsx)(L.a.Header,{children:Object(U.jsxs)(T.a,{children:[Object(U.jsxs)(f.a,{as:"select",value:e.group.group_type,onChange:function(e){return t("group_type",e.target.value)},children:[Object(U.jsx)("option",{children:"AND"}),Object(U.jsx)("option",{children:"OR"})]}),Object(U.jsx)(T.a.Text,{children:"Group"}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{variant:"danger",onClick:function(){return n(e.group)},children:"Delete"})})]})}),Object(U.jsxs)(P.a,{children:[Object(U.jsx)(P.a.Item,{children:e.group.requirements.map((function(e){return e.requirements?Object(U.jsx)(X,{group:e,handleReqGroupDeleted:c,handleReqGroupChanged:function(n,t){return i(e,n,t)}},e.id):Object(U.jsx)(W,{requirement:e,handleReqDeleted:c,handleReqChanged:function(n,t){return i(e,n,t)}},e.id)}))}),Object(U.jsx)(P.a.Item,{children:Object(U.jsxs)(Q.a,{children:[Object(U.jsx)(v.a,{onClick:function(){var n=new D,c=[].concat(Object(s.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Req Group"}),Object(U.jsx)(v.a,{onClick:function(){var n=new w,c=[].concat(Object(s.a)(e.group.requirements),[n]);t("requirements",c)},children:"Add Single Req"})]})})]})]})}function Z(e){var n=e.handleChoiceDeletion,t=e.handleChoiceChange,i=Object(d.f)(I),r=Object(c.useState)(e.choice.exit_node),a=Object(j.a)(r,2),l=a[0],u=a[1];return Object(U.jsx)(L.a,{children:Object(U.jsxs)(L.a.Body,{children:[Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Choice"})}),Object(U.jsx)(f.a,{value:e.choice.name,onChange:function(e){return t("name",e.target.value)}}),Object(U.jsx)(T.a.Append,{children:Object(U.jsx)(v.a,{variant:"danger",onClick:n,children:"Delete"})})]}),Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Exit Node"})}),Object(U.jsxs)(f.a,{as:"select",value:l,onChange:function(e){u(e.target.value),t("exit_node",e.target.value)},children:[Object(U.jsx)("option",{children:"FAIL"}),Object(U.jsx)("option",{children:"WIN"}),i.map((function(e){return Object(U.jsx)("option",{children:e.name},e.id)}))]})]}),Object(U.jsx)(B,{title:"Selection Effects",effects:e.choice.on_selection_effects,handleEffectAdded:function(n){return function(n,c){var i=e.choice[n],r=void 0!==i?[].concat(Object(s.a)(i),[c]):[c];t(n,r)}("on_selection_effects",n)},handleEffectsChanged:function(n,c,i){return function(n,c,i,r){var a=Object(o.a)(Object(o.a)({},c),{},Object(m.a)({},i,r)),d=e.choice[n].slice();d[e.choice[n].indexOf(c)]=a,t(n,d)}("on_selection_effects",n,c,i)},handleEffectDeleted:function(n){return function(n,c){var i=e.choice[n].filter((function(e){return e!==c}));t(n,i.length?i:void 0)}("on_selection_effects",n)}}),Object(U.jsx)(J,{title:"Requirements",requirements:e.choice.requirements,handleRequirementAdded:function(n){var c=e.choice.requirements,i=void 0!==c?[].concat(Object(s.a)(c),[n]):[n];t("requirements",i)},handleRequirementDeleted:function(n){var c=e.choice.requirements.filter((function(e){return e!==n}));t("requirements",c.length?c:void 0)},handleRequirementsChanged:function(n,c,i){var r=Object(o.a)(Object(o.a)({},n),{},Object(m.a)({},c,i)),a=e.choice.requirements.slice();a[e.choice.requirements.indexOf(n)]=r,t("requirements",a)}})]})})}function K(e){var n=e.handleNodeDeletion,t=Object(d.e)(S(e.node.id)),i=Object(j.a)(t,2),r=i[0],a=i[1],l=function(n,t){var c=e.node[n],i=void 0!==c?[].concat(Object(s.a)(c),[t]):[t];a(C(r,n,i))},b=function(n,t,c,i){var d=Object(o.a)(Object(o.a)({},t),{},Object(m.a)({},c,i)),s=e.node[n].slice();s[e.node[n].indexOf(t)]=d,a(C(r,n,s))},O=function(n,t){var c=e.node[n].filter((function(e){return e!==t}));a(C(r,n,c.length?c:void 0))},x=r.raw_image?r.raw_image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkBAMAAAAxqGI4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP8AABv/jSIAAAAJcEhZcwAADsIAAA7CARUoSoAAAADZSURBVGje7ZNRFoQgCADhBnD/y66AWenbLb935vXK1BwhEQAAAAAAAACAv0LdXLzR2tVsPepuItWZ9Gb0xgxzvww+k7Prk978LvHo1rjvSTQWb4/cYry1q9bLjnMvdWvzwhMRy4bEhqSamb5cZpHUhD66Jck0D4m8kNTIjqTy3CXxK9QsM9hDXCXqcyrfae6SfgZK4qfED6+67UnWf/IkcZmjfCPR83SlREeuJkk/XVUuW5Lc81QnkUG9FYMf5XSZuxPJWD4e9lNSIehUqAAAAAAAAAAAAFdEPmbgEwxTT+ziAAAAAElFTkSuQmCC",g=Object(c.useRef)(),p=r.raw_image?"custom image data":r.image;return Object(U.jsxs)(N.a,{children:[Object(U.jsx)(L.a,{children:Object(U.jsxs)(L.a.Body,{children:[Object(U.jsxs)(L.a.Title,{children:[r.name," ",Object(U.jsx)(v.a,{variant:"danger",onClick:n,children:"Delete"})]}),Object(U.jsx)(L.a.Img,{variant:"top",src:x}),Object(U.jsxs)(T.a,{children:[Object(U.jsx)(T.a.Prepend,{children:Object(U.jsx)(T.a.Text,{children:"Image"})}),Object(U.jsx)(u.a.Control,{value:p,readOnly:void 0!==r.raw_image,onChange:function(e){a(C(r,"image",e.target.value))}}),Object(U.jsx)(u.a.File,{type:"file",accept:"image/png",ref:g,onChange:function(e){var n=new FileReader;n.onload=function(e){var n=new Image;n.onload=function(){if(200===n.width&&100===n.height){var t=Object(o.a)(Object(o.a)({},r),{},{raw_image:e.target.result,image:null});a(t)}else alert("Adventure images need to be be 200x100 pngs.")},n.src=e.target.result},n.readAsDataURL(e.target.files[0])},style:{display:"none"}}),Object(U.jsxs)(T.a.Append,{children:[Object(U.jsx)(v.a,{onClick:function(){g.current.click()},children:"Custom"}),Object(U.jsx)(v.a,{onClick:function(e){var n=Object(o.a)(Object(o.a)({},r),{},{raw_image:void 0,image:"default"});a(n)},children:"Reset"})]})]}),Object(U.jsxs)(h.a,{children:[Object(U.jsx)(u.a.Label,{children:"Node ID"}),Object(U.jsx)(f.a,{value:r.name,onChange:function(e){var n=C(r,"name",e.target.value);a(n)}})]}),Object(U.jsxs)(h.a,{children:[Object(U.jsx)(u.a.Label,{children:"Description"}),Object(U.jsx)(f.a,{as:"textarea",rows:5,placeholder:"Describe whatever here.",value:r.description,onChange:function(e){return a(C(r,"description",e.target.value))}})]}),Object(U.jsx)(B,{title:"On Enter Effects",effects:r.on_enter_effects,handleEffectAdded:function(e){return l("on_enter_effects",e)},handleEffectsChanged:function(e,n,t){return b("on_enter_effects",e,n,t)},handleEffectDeleted:function(e){return O("on_enter_effects",e)}}),Object(U.jsx)(B,{title:"On Exit Effects",effects:r.on_exit_effects,parent_id:r.id,handleEffectAdded:function(e){return l("on_exit_effects",e)},handleEffectsChanged:function(e,n,t){return b("on_exit_effects",e,n,t)},handleEffectDeleted:function(e){return O("on_exit_effects",e)}})]})}),Object(U.jsx)(L.a,{children:Object(U.jsxs)(L.a.Body,{children:[Object(U.jsx)(L.a.Header,{children:"Choices"}),Object(U.jsxs)(P.a,{children:[r.choices.map((function(n){return Object(U.jsx)(P.a.Item,{children:Object(U.jsx)(Z,{choice:n,handleChoiceDeletion:function(){return function(n){var t=e.node.choices.filter((function(e){return e!==n}));a(C(r,"choices",t))}(n)},handleChoiceChange:function(t,c){var i=Object(o.a)(Object(o.a)({},n),{},Object(m.a)({},t,c));!function(n,t){var c=e.node.choices.slice();c[e.node.choices.indexOf(n)]=t,a(C(r,"choices",c))}(n,i)}})},n.id)})),Object(U.jsx)(F.a,{children:Object(U.jsx)(v.a,{onClick:function(){return function(n){var t=[].concat(Object(s.a)(e.node.choices),[n]);a(C(r,"choices",t))}(new k)},children:"Add Choice"})})]})]})})]})}function M(){var e=Object(d.e)(E),n=Object(j.a)(e,2),t=n[0],i=n[1],r=Object(d.e)(I),a=Object(j.a)(r,1)[0],p=Object(c.useState)(""),m=Object(j.a)(p,2),A=m[0],q=m[1],k=Object(c.useRef)();return Object(U.jsxs)(l.a,{fluid:"xl",children:[Object(U.jsxs)(u.a,{children:[Object(U.jsxs)(h.a,{children:[Object(U.jsx)(u.a.Label,{children:"Adventure name"}),Object(U.jsx)(f.a,{placeholder:"New adventure",value:t.name,onChange:function(e){return i(C(t,"name",e.target.value))}})]}),Object(U.jsxs)(h.a,{children:[Object(U.jsx)(u.a.Label,{children:"Starting node"}),Object(U.jsx)(f.a,{as:"select",value:t.starting_node,onChange:function(e){return i(C(t,"starting_node",e.target.value))},children:a.map((function(e){return Object(U.jsx)("option",{children:e.name},e.id)}))})]})]}),Object(U.jsxs)(b.a.Container,{id:"nodes",activeKey:A,onSelect:function(e){return q(e)},children:[Object(U.jsx)(O.a,{children:Object(U.jsx)(x.a,{children:Object(U.jsxs)(g.a,{variant:"tabs",children:[a.map((function(e){return Object(U.jsx)(g.a.Item,{children:Object(U.jsx)(g.a.Link,{eventKey:e.id,children:e.name})},e.id)})),Object(U.jsx)(g.a.Item,{children:Object(U.jsx)(g.a.Link,{onClick:function(){var e=Object(o.a)(Object(o.a)({},t),{},{nodes:[].concat(Object(s.a)(a),[new R])}),n=e.nodes[0];e.starting_node?i(e):(e.starting_node=n.name,i(e),q(n.id))},children:"Add Node"})})]})})}),Object(U.jsx)(O.a,{children:Object(U.jsx)(x.a,{children:Object(U.jsx)(b.a.Content,{children:a.map((function(e){return Object(U.jsx)(b.a.Pane,{eventKey:e.id,children:Object(U.jsx)(K,{node:e,handleNodeDeletion:function(){return function(e){var n=a.filter((function(n){return n!==e}));n.length&&q(n[0].id),i(C(t,"nodes",n))}(e)}})},e.id)}))})})})]}),Object(U.jsx)(O.a,{children:Object(U.jsxs)(x.a,{children:[Object(U.jsx)(v.a,{onClick:function(){var e={adventure_name:t.name,starting_node:t.starting_node,nodes:a},n=new Blob([JSON.stringify(e,(function(e,n){if("id"!==e)return n}))],{type:"application/json"}),c=URL.createObjectURL(n);window.open(c)},children:"Export"}),Object(U.jsx)(v.a,{onClick:function(){k.current.click()},children:"Import"}),Object(U.jsx)(u.a.File,{onChange:function(e){var n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result,(function(e,n){return n===Object(n)&&(n.id=_("import")),n})),c=Object(o.a)(Object(o.a)({},t),{},{name:n.adventure_name,starting_node:n.starting_node,nodes:n.nodes});i(c)},n.readAsText(e.target.files[0])},accept:".json",ref:k,style:{display:"none"}})]})})]})}var H=function(){return Object(U.jsx)(d.a,{children:Object(U.jsx)(M,{})})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,68)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(U.jsx)(i.a.StrictMode,{children:Object(U.jsx)(H,{})}),document.getElementById("root")),V()}},[[55,1,2]]]);
//# sourceMappingURL=main.215996e0.chunk.js.map